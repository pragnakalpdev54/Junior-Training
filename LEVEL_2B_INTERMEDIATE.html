
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pragnakalpdev54.github.io/DRF/LEVEL_2B_INTERMEDIATE.html">
      
      
        <link rel="prev" href="LEVEL_2A_INTERMEDIATE.html">
      
      
        <link rel="next" href="LEVEL_3A_ADVANCED.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Part B – Applied DRF - DRF Training Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/footer.css">
    
      <link rel="stylesheet" href="assets/stylesheets/ui.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#level-2b-intermediate-filtering-searching-advanced-features" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="DRF Training Guide" class="md-header__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DRF Training Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part B – Applied DRF
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="DRF Training Guide" class="md-nav__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DRF Training Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Course Levels
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Course Levels
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_0_BEGINNER.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 0 – Beginner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_1_FOUNDATIONS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 1 – Foundations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Level 2 – Intermediate
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Level 2 – Intermediate
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_2A_INTERMEDIATE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A – Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Part B – Applied DRF
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="LEVEL_2B_INTERMEDIATE.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B – Applied DRF
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-on-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note on Examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Filtering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-django-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install django-filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-in-settingspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure in settings.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Filtering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-filtering-with-filterset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Filtering with FilterSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Searching
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Searching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Searching?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searchfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        SearchFilter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-lookup-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Search Lookup Expressions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ordering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ordering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Ordering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orderingfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrderingFilter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pagination
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pagination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Pagination?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumberpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        PageNumberPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitoffsetpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        LimitOffsetPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cursorpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        CursorPagination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Book API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Book API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-book-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Book Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-book-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Book Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-book-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Book ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Book API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Task API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Task API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-task-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Task Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-task-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Task Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-task-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Task Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-task-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Task ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Task API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#userprofile-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        UserProfile API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UserProfile API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-userprofile-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Create UserProfile Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-userprofile-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create UserProfile Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-userprofile-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create UserProfile ViewSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Throttling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Throttling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Throttling?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-throttling-is-determined" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Throttling is Determined
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-the-throttling-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting the Throttling Policy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting the Throttling Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-throttling-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Throttling Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-view-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-View Throttling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-viewset-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-ViewSet Throttling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-action-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-Action Throttling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-clients-are-identified" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Clients are Identified
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up the Cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-note-on-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        A Note on Concurrency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anonratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        AnonRateThrottle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        UserRateThrottle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scopedratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        ScopedRateThrottle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-throttles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Throttles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-throttling-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Throttling Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exception Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exception Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Exception Handling?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-authentication-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Authentication Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-validation-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Validation Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-jwt-token-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling JWT Token Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-vs-development-error-messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production vs Development Error Messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-response-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Response Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-authenticated-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Authenticated APIs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercises
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-complete-secure-book-api-filtering-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Complete Secure Book API (Filtering &amp; Pagination)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-task-filtering-searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Task Filtering &amp; Searching
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-custom-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Custom Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-advanced-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Advanced Pagination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-errors-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Errors and Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Errors and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-1-django_filtersexceptionsfieldnotfound-field-title_contains-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 1: django_filters.exceptions.FieldNotFound: Field 'title_contains' not found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-2-rest_frameworkexceptionsparseerror-malformed-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 2: rest_framework.exceptions.ParseError: Malformed request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-3-djangocoreexceptionsfielderror-cannot-resolve-keyword-title__icontains-into-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 3: django.core.exceptions.FieldError: Cannot resolve keyword 'title__icontains' into field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-4-rest_frameworkexceptionsnotfound-invalid-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 4: rest_framework.exceptions.NotFound: Invalid page.
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-5-filtering-not-working-all-results-returned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 5: Filtering not working - all results returned
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#general-debugging-tips-for-level-2b" class="md-nav__link">
    <span class="md-ellipsis">
      
        General Debugging Tips for Level 2B
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-ons
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add-ons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-on-1-custom-filter-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 1: Custom Filter Backend
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-on-2-custom-pagination-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 2: Custom Pagination Class
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Level 3 – Advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Level 3 – Advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_3A_ADVANCED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A – Internals & Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_3B_ADVANCED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B – Security & Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_4_SCALABLE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 4 – Scalable Systems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_5_EXPERT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 5 – Expert Level
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Tools & Extras
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools & Extras
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="POSTGRESQL_SETUP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Postman Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Postman Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="POSTMAN_GUIDE_PART1_BASICS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 1 – Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="POSTMAN_GUIDE_PART2_ADVANCED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 2 – Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CURL_GUIDE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cURL Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-on-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note on Examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Filtering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-django-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install django-filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-in-settingspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure in settings.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Filtering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-filtering-with-filterset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Filtering with FilterSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Searching
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Searching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Searching?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searchfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        SearchFilter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-lookup-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Search Lookup Expressions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ordering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ordering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Ordering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orderingfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrderingFilter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pagination
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pagination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Pagination?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumberpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        PageNumberPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitoffsetpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        LimitOffsetPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cursorpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        CursorPagination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Book API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Book API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-book-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Book Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-book-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Book Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-book-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Book ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Book API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Task API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Task API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-task-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Task Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-task-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Task Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-task-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Task Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-task-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Task ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Task API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#userprofile-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        UserProfile API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UserProfile API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-userprofile-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Create UserProfile Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-userprofile-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create UserProfile Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-userprofile-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create UserProfile ViewSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Throttling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Throttling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Throttling?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-throttling-is-determined" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Throttling is Determined
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-the-throttling-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting the Throttling Policy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting the Throttling Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-throttling-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Throttling Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-view-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-View Throttling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-viewset-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-ViewSet Throttling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-action-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-Action Throttling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-clients-are-identified" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Clients are Identified
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up the Cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-note-on-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        A Note on Concurrency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anonratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        AnonRateThrottle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        UserRateThrottle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scopedratethrottle" class="md-nav__link">
    <span class="md-ellipsis">
      
        ScopedRateThrottle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-throttles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Throttles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-throttling-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Throttling Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exception Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exception Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Exception Handling?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-authentication-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Authentication Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-validation-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Validation Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-jwt-token-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling JWT Token Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-vs-development-error-messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production vs Development Error Messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-response-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Response Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-authenticated-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Authenticated APIs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercises
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-complete-secure-book-api-filtering-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Complete Secure Book API (Filtering &amp; Pagination)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-task-filtering-searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Task Filtering &amp; Searching
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-custom-exception-handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Custom Exception Handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-advanced-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Advanced Pagination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-errors-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Errors and Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Errors and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-1-django_filtersexceptionsfieldnotfound-field-title_contains-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 1: django_filters.exceptions.FieldNotFound: Field 'title_contains' not found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-2-rest_frameworkexceptionsparseerror-malformed-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 2: rest_framework.exceptions.ParseError: Malformed request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-3-djangocoreexceptionsfielderror-cannot-resolve-keyword-title__icontains-into-field" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 3: django.core.exceptions.FieldError: Cannot resolve keyword 'title__icontains' into field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-4-rest_frameworkexceptionsnotfound-invalid-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 4: rest_framework.exceptions.NotFound: Invalid page.
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-5-filtering-not-working-all-results-returned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error 5: Filtering not working - all results returned
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#general-debugging-tips-for-level-2b" class="md-nav__link">
    <span class="md-ellipsis">
      
        General Debugging Tips for Level 2B
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-ons
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add-ons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-on-1-custom-filter-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 1: Custom Filter Backend
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-on-2-custom-pagination-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 2: Custom Pagination Class
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="level-2b-intermediate-filtering-searching-advanced-features">Level 2B: Intermediate - Filtering, Searching &amp; Advanced Features<a class="headerlink" href="#level-2b-intermediate-filtering-searching-advanced-features" title="Permanent link">&para;</a></h1>
<h2 id="goal">Goal<a class="headerlink" href="#goal" title="Permanent link">&para;</a></h2>
<p>Build APIs with powerful filtering, searching, ordering, pagination, and robust error handling. By the end of this level, you'll be able to create production-ready APIs with advanced query capabilities and professional error handling.</p>
<h2 id="note-on-examples">Note on Examples<a class="headerlink" href="#note-on-examples" title="Permanent link">&para;</a></h2>
<p>This guide builds on <strong>Level 2A</strong> where you learned authentication and permissions. We'll use <strong>Task API</strong> and <strong>Book API</strong> as examples throughout, adding filtering, searching, ordering, and pagination to the secure APIs you built in Level 2A.</p>
<p><strong>Prerequisites</strong>: Complete <a href="LEVEL_2A_INTERMEDIATE.html">Level 2A</a> first to understand authentication and permissions.</p>
<p>You can apply all concepts to any model (Task, Book, Product, Post, etc.).</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#filtering">Filtering</a></li>
<li><a href="#searching">Searching</a></li>
<li><a href="#ordering">Ordering</a></li>
<li><a href="#pagination">Pagination</a></li>
<li><a href="#exception-handling">Exception Handling</a></li>
<li><a href="#testing-authenticated-apis">Testing Authenticated APIs</a></li>
<li><a href="#exercises">Exercises</a></li>
<li><a href="#common-errors-and-solutions">Common Errors and Solutions</a></li>
<li><a href="#add-ons">Add-ons</a></li>
</ol>
<h2 id="filtering">Filtering<a class="headerlink" href="#filtering" title="Permanent link">&para;</a></h2>
<h3 id="what-is-filtering">What is Filtering?<a class="headerlink" href="#what-is-filtering" title="Permanent link">&para;</a></h3>
<p><strong>Filtering</strong> allows clients to request specific subsets of data based on criteria.</p>
<p><strong>The Problem</strong>: Without filtering, clients get ALL data, even if they only need a subset.</p>
<p><strong>Example</strong>:
- Without filtering: <code>GET /api/tasks/</code> → Returns all tasks (10,000 tasks) ❌
- With filtering: <code>GET /api/tasks/?completed=false</code> → Returns only incomplete tasks ✅</p>
<p><strong>Why Filtering?</strong>
- <strong>Performance</strong>: Return only needed data (faster queries)
- <strong>User experience</strong>: Users find what they're looking for
- <strong>Bandwidth</strong>: Less data transferred
- <strong>Database efficiency</strong>: Queries only relevant records</p>
<p><strong>Real-world analogy</strong>:
- <strong>No filtering</strong> = Library with no organization (find book by searching all shelves)
- <strong>With filtering</strong> = Library with sections (go directly to "Fiction" section)</p>
<p><strong>Common Filter Types</strong>:
- <strong>Exact match</strong>: <code>?completed=true</code> (completed exactly equals true)
- <strong>Contains</strong>: <code>?title__icontains=django</code> (title contains "django")
- <strong>Boolean</strong>: <code>?completed=false</code> (filter by boolean field)
- <strong>Date range</strong>: <code>?created_after=2024-01-01</code> (created after date)</p>
<h3 id="install-django-filter">Install django-filter<a class="headerlink" href="#install-django-filter" title="Permanent link">&para;</a></h3>
<p><strong>Why django-filter?</strong>
- Makes filtering easy and powerful
- Supports complex filters
- Works seamlessly with DRF
- Handles edge cases</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>django-filter
</code></pre></div>

<h3 id="configure-in-settingspy">Configure in settings.py<a class="headerlink" href="#configure-in-settingspy" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="c1"># Add django_filters to installed apps</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ... other apps ...</span>
    <span class="s1">&#39;django_filters&#39;</span><span class="p">,</span>  <span class="c1"># Package for advanced filtering</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>  <span class="c1"># Django REST Framework</span>
<span class="p">]</span>

<span class="c1"># DRF configuration - applies to all views unless overridden</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Filter backends: Systems that handle filtering, searching, ordering</span>
    <span class="c1"># These are checked in order - first one that can handle the request is used</span>
    <span class="s1">&#39;DEFAULT_FILTER_BACKENDS&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1"># DjangoFilterBackend: Handles filtering with django-filter (exact matches, ranges, etc.)</span>
        <span class="s1">&#39;django_filters.rest_framework.DjangoFilterBackend&#39;</span><span class="p">,</span>
        <span class="c1"># SearchFilter: Handles searching across multiple fields (built into DRF)</span>
        <span class="s1">&#39;rest_framework.filters.SearchFilter&#39;</span><span class="p">,</span>
        <span class="c1"># OrderingFilter: Handles sorting results (built into DRF)</span>
        <span class="s1">&#39;rest_framework.filters.OrderingFilter&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="basic-filtering">Basic Filtering<a class="headerlink" href="#basic-filtering" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client adds query parameters to URL: <code>?completed=false</code>
2. Django Filter intercepts request
3. Applies filters to queryset
4. Returns filtered results</p>
<p><strong>Why <code>filter_backends</code>?</strong>
- Tells DRF which filtering system to use
- Can use multiple backends (filtering + searching + ordering)
- Each backend handles different aspects</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="c1"># Import DjangoFilterBackend for filtering functionality</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="c1"># Import viewsets and filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="c1"># Import models and serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>

<span class="c1"># ViewSet provides all CRUD operations automatically</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># Base queryset - all tasks in database</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="c1"># Serializer for data conversion</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>

    <span class="c1"># Enable filtering by adding filter backends</span>
    <span class="c1"># filter_backends is a list - can have multiple backends (filtering + searching + ordering)</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">]</span>  <span class="c1"># Enable filtering with django-filter</span>

    <span class="c1"># Simple filtering: List fields that can be filtered</span>
    <span class="c1"># filterset_fields allows exact match filtering on these fields</span>
    <span class="c1"># Example: ?completed=false will filter tasks where completed equals False</span>
    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>  <span class="c1"># Which fields can be filtered</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>filter_backends</code></strong>: List of filtering systems to use
- <strong><code>filterset_fields</code></strong>: Simple list of fields that can be filtered
- <strong>Exact match</strong>: <code>?completed=false</code> finds tasks where completed exactly equals False</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Filter by completed status</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/?completed<span class="o">=</span><span class="nb">false</span>
</code></pre></div>

<p><strong>What happens</strong>:
- URL parameter <code>completed=false</code>
- Django Filter finds tasks where <code>completed</code> field equals False
- Returns only incomplete tasks</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Filter by multiple fields (if you have date field)</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?completed=false&amp;created_at=2024-01-01&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>:
- Both filters applied: <code>completed=false</code> AND <code>created_at=2024-01-01</code>
- Returns tasks matching BOTH criteria
- Filters are combined with AND logic</p>
<h3 id="advanced-filtering-with-filterset">Advanced Filtering with FilterSet<a class="headerlink" href="#advanced-filtering-with-filterset" title="Permanent link">&para;</a></h3>
<p><strong>Why use FilterSet instead of <code>filterset_fields</code>?</strong>
- <strong>Advanced lookups</strong>: <code>icontains</code>, <code>gte</code>, <code>lte</code>, etc.
- <strong>Custom field names</strong>: <code>created_after</code> instead of <code>created_at__gte</code>
- <strong>More control</strong>: Complex filtering logic
- <strong>Better UX</strong>: User-friendly filter names</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="c1"># Import django_filters for advanced filtering</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="c1"># Import the model to filter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>

<span class="c1"># FilterSet class defines how filtering works</span>
<span class="c1"># More powerful than filterset_fields - allows custom field names and advanced lookups</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="c1"># Custom filter: Filter by title containing text (case-insensitive)</span>
    <span class="c1"># lookup_expr=&#39;icontains&#39; means &quot;contains&quot; (case-insensitive)</span>
    <span class="c1"># Example: ?title=django finds tasks with &quot;django&quot; in title</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span><span class="p">)</span>

    <span class="c1"># Custom filter: Filter by date range (created after a date)</span>
    <span class="c1"># field_name=&#39;created_at&#39; = which model field to filter</span>
    <span class="c1"># lookup_expr=&#39;gte&#39; = greater than or equal (created on or after this date)</span>
    <span class="c1"># Example: ?created_after=2024-01-01 finds tasks created on or after Jan 1, 2024</span>
    <span class="n">created_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>

    <span class="c1"># Custom filter: Filter by date range (created before a date)</span>
    <span class="c1"># lookup_expr=&#39;lte&#39; = less than or equal (created on or before this date)</span>
    <span class="c1"># Example: ?created_before=2024-12-31 finds tasks created before Dec 31, 2024</span>
    <span class="n">created_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="c1"># Filter by completed status (exact match)</span>
    <span class="c1"># BooleanFilter handles True/False values</span>
    <span class="c1"># Example: ?completed=false finds incomplete tasks</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">BooleanFilter</span><span class="p">()</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Model to filter</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="c1"># Fields that can be used in URL query parameters</span>
        <span class="c1"># Must match the filter field names defined above</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;created_after&#39;</span><span class="p">,</span> <span class="s1">&#39;created_before&#39;</span><span class="p">]</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>title</code></strong>: <code>?title=django</code> finds tasks with "django" in title (case-insensitive)
- <strong><code>created_after</code></strong>: <code>?created_after=2024-01-01</code> finds tasks created on or after date
- <strong><code>created_before</code></strong>: <code>?created_before=2024-12-31</code> finds tasks created before date
- <strong><code>completed</code></strong>: <code>?completed=false</code> finds incomplete tasks</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="c1"># Import the FilterSet class we created</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskFilter</span>
<span class="c1"># Import other necessary classes</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># Base queryset</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="c1"># Serializer for data conversion</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>

    <span class="c1"># Use FilterSet class instead of simple filterset_fields</span>
    <span class="c1"># filterset_class provides advanced filtering (custom field names, date ranges, etc.)</span>
    <span class="c1"># When client sends ?title=django&amp;created_after=2024-01-01, TaskFilter handles it</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">TaskFilter</span>  <span class="c1"># Use FilterSet instead of filterset_fields</span>
</code></pre></div>

<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Filter by title containing &quot;django&quot;</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?title=django&quot;</span>

<span class="c1"># Filter by date range</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?created_after=2024-01-01&amp;created_before=2024-12-31&quot;</span>

<span class="c1"># Combine filters</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?completed=false&amp;title=important&quot;</span>
</code></pre></div>

<h2 id="searching">Searching<a class="headerlink" href="#searching" title="Permanent link">&para;</a></h2>
<h3 id="what-is-searching">What is Searching?<a class="headerlink" href="#what-is-searching" title="Permanent link">&para;</a></h3>
<p><strong>Searching</strong> allows users to find data by searching across multiple fields with a single query.</p>
<p><strong>Difference from Filtering</strong>:
- <strong>Filtering</strong>: Exact matches on specific fields (<code>?author=John</code>)
- <strong>Searching</strong>: Partial matches across multiple fields (<code>?search=john</code> finds in title, author, description)</p>
<p><strong>Why Searching?</strong>
- <strong>User-friendly</strong>: Users don't need to know exact field names
- <strong>Flexible</strong>: Search across multiple fields at once
- <strong>Common pattern</strong>: Search boxes in web apps
- <strong>Better UX</strong>: "Search for anything" vs "Filter by specific field"</p>
<p><strong>Real-world analogy</strong>:
- <strong>Filtering</strong> = Library catalog with specific fields (author, genre, year)
- <strong>Searching</strong> = Google search (type anything, finds matches anywhere)</p>
<h3 id="searchfilter">SearchFilter<a class="headerlink" href="#searchfilter" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. User types search term: <code>?search=django</code>
2. DRF searches across specified fields
3. Returns records matching search term in ANY field
4. Uses case-insensitive partial matching by default</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="c1"># Import viewsets and filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="c1"># Import models and serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># Base queryset</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="c1"># Serializer for data conversion</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>

    <span class="c1"># Enable searching by adding SearchFilter to filter_backends</span>
    <span class="c1"># SearchFilter is built into DRF (no extra package needed)</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">]</span>  <span class="c1"># Enable searching</span>

    <span class="c1"># List of fields to search in</span>
    <span class="c1"># When user sends ?search=django, DRF searches for &quot;django&quot; in these fields</span>
    <span class="c1"># Uses case-insensitive partial matching by default</span>
    <span class="c1"># Returns tasks where ANY field contains the search term (OR logic)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">]</span>  <span class="c1"># Fields to search in</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>SearchFilter</code></strong>: DRF's built-in search backend (no extra package needed)
- <strong><code>search_fields</code></strong>: List of fields to search in
- <strong>Default behavior</strong>: Case-insensitive, partial matching
- <strong>OR logic</strong>: Matches if search term found in ANY field</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Search in title and description</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?search=django&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>:
- Searches for "django" in <code>title</code> and <code>desc</code> fields
- Returns tasks where ANY field contains "django"
- Case-insensitive: "Django", "DJANGO", "django" all match
- Partial match: "Learn Django REST Framework" matches "django"</p>
<h3 id="search-lookup-expressions">Search Lookup Expressions<a class="headerlink" href="#search-lookup-expressions" title="Permanent link">&para;</a></h3>
<p><strong>Advanced search patterns:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;^title&#39;</span><span class="p">,</span>      <span class="c1"># Starts with (e.g., &quot;Learn&quot; matches &quot;Learn Django&quot;)</span>
        <span class="s1">&#39;=title&#39;</span><span class="p">,</span>      <span class="c1"># Exact match (e.g., &quot;Learn Django&quot; only)</span>
        <span class="s1">&#39;@desc&#39;</span><span class="p">,</span>       <span class="c1"># Full text search (PostgreSQL only)</span>
        <span class="s1">&#39;$title&#39;</span><span class="p">,</span>      <span class="c1"># Regex search (advanced)</span>
    <span class="p">]</span>
</code></pre></div>

<p><strong>When to use each:</strong>
- <strong><code>^title</code></strong>: When you want tasks starting with specific text
- <strong><code>=title</code></strong>: When you need exact match
- <strong><code>@desc</code></strong>: PostgreSQL full-text search (most powerful, database-specific)
- <strong><code>$title</code></strong>: Complex pattern matching (use sparingly)</p>
<p><strong>Most common</strong>: Just use field name without prefix for simple case-insensitive search.</p>
<h2 id="ordering">Ordering<a class="headerlink" href="#ordering" title="Permanent link">&para;</a></h2>
<h3 id="what-is-ordering">What is Ordering?<a class="headerlink" href="#what-is-ordering" title="Permanent link">&para;</a></h3>
<p><strong>Ordering</strong> controls the sequence in which results are returned.</p>
<p><strong>The Problem</strong>: Without ordering, results come in unpredictable order (usually database insertion order).</p>
<p><strong>Why Ordering?</strong>
- <strong>User experience</strong>: Show most relevant/newest first
- <strong>Consistency</strong>: Same query always returns same order
- <strong>Flexibility</strong>: Let users choose sort order
- <strong>Default behavior</strong>: Set sensible default (newest first, alphabetical, etc.)</p>
<p><strong>Real-world analogy</strong>:
- <strong>No ordering</strong> = Bookshelf with random order
- <strong>With ordering</strong> = Bookshelf organized by date (newest first) or alphabetically</p>
<h3 id="orderingfilter">OrderingFilter<a class="headerlink" href="#orderingfilter" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client specifies order: <code>?ordering=-created_at</code>
2. DRF sorts queryset by specified field
3. <code>-</code> prefix means descending (newest first)
4. No prefix means ascending (oldest first)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="c1"># Import viewsets and filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="c1"># Import models and serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># Base queryset</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="c1"># Serializer for data conversion</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>

    <span class="c1"># Enable ordering by adding OrderingFilter to filter_backends</span>
    <span class="c1"># OrderingFilter is built into DRF (no extra package needed)</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>  <span class="c1"># Enable ordering</span>

    <span class="c1"># List of fields users can sort by</span>
    <span class="c1"># Security: Prevents sorting by sensitive fields (like password hash)</span>
    <span class="c1"># Users can only sort by fields in this list</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>  <span class="c1"># Allowed fields</span>

    <span class="c1"># Default ordering if user doesn&#39;t specify ?ordering= parameter</span>
    <span class="c1"># &#39;-&#39; prefix means descending (newest/highest first)</span>
    <span class="c1"># Without &#39;-&#39; means ascending (oldest/lowest first)</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>  <span class="c1"># Default ordering (newest first)</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>OrderingFilter</code></strong>: DRF's built-in ordering backend
- <strong><code>ordering_fields</code></strong>: Which fields users can sort by (security: prevents sorting by sensitive fields)
- <strong><code>ordering</code></strong>: Default order if user doesn't specify
- <strong><code>-</code> prefix</strong>: Descending order (newest/highest first)
- <strong>No prefix</strong>: Ascending order (oldest/lowest first)</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Order by title (ascending: A-Z)</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?ordering=title&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>: Tasks sorted alphabetically by title (A to Z)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Order by created_at (descending: newest first)</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?ordering=-created_at&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>: Tasks sorted by creation date, newest first (most recent at top)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Multiple fields: First by completed status, then by created_at (descending)</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?ordering=completed,-created_at&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>: 
1. First sorts by completed (False first, then True)
2. Within same completion status, sorts by created_at (newest first)
3. Useful for showing incomplete tasks first, then completed</p>
<h2 id="pagination">Pagination<a class="headerlink" href="#pagination" title="Permanent link">&para;</a></h2>
<h3 id="what-is-pagination">What is Pagination?<a class="headerlink" href="#what-is-pagination" title="Permanent link">&para;</a></h3>
<p><strong>Pagination</strong> splits large result sets into smaller "pages" of data.</p>
<p><strong>The Problem</strong>: Without pagination, returning 10,000 records causes:
- <strong>Slow response</strong>: Large JSON payload
- <strong>High memory</strong>: Server/client must handle all data
- <strong>Poor UX</strong>: User overwhelmed with data
- <strong>Database load</strong>: Fetching all records at once</p>
<p><strong>Why Pagination?</strong>
- <strong>Performance</strong>: Faster responses (only fetch what's needed)
- <strong>User experience</strong>: Manageable chunks of data
- <strong>Scalability</strong>: Works with millions of records
- <strong>Bandwidth</strong>: Less data transferred
- <strong>Mobile-friendly</strong>: Smaller payloads for mobile networks</p>
<p><strong>Real-world analogy</strong>:
- <strong>No pagination</strong> = Dumping entire library catalog on one page
- <strong>With pagination</strong> = Showing 10 books per page with "Next" button</p>
<p><strong>Common Pagination Types</strong>:
1. <strong>Page Number</strong>: <code>?page=2</code> (most common, user-friendly)
2. <strong>Limit/Offset</strong>: <code>?limit=20&amp;offset=40</code> (flexible, good for APIs)
3. <strong>Cursor</strong>: <code>?cursor=abc123</code> (best for large datasets, stable)</p>
<h3 id="pagenumberpagination">PageNumberPagination<a class="headerlink" href="#pagenumberpagination" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client requests page: <code>?page=2</code>
2. Server calculates which records to return (records 11-20 for page 2)
3. Returns page data + metadata (total count, next/previous links)
4. Client can navigate to next/previous pages</p>
<p><strong>Why Page Number?</strong>
- <strong>User-friendly</strong>: Easy to understand ("Go to page 2")
- <strong>Simple</strong>: Just specify page number
- <strong>Good for</strong>: Web UIs, predictable navigation
- <strong>Limitation</strong>: Can be slow with very large datasets (offset calculation)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="c1"># DRF configuration - applies to all list endpoints globally</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Pagination class to use for all list views</span>
    <span class="c1"># PageNumberPagination = User-friendly pagination with page numbers (?page=2)</span>
    <span class="s1">&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class="p">:</span> <span class="s1">&#39;rest_framework.pagination.PageNumberPagination&#39;</span><span class="p">,</span>

    <span class="c1"># How many records to show per page</span>
    <span class="c1"># Can be overridden per-view if needed</span>
    <span class="c1"># Example: If you have 100 tasks, this shows 10 per page (10 pages total)</span>
    <span class="s1">&#39;PAGE_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># Records per page</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>DEFAULT_PAGINATION_CLASS</code></strong>: Applies to all list endpoints
- <strong><code>PAGE_SIZE</code></strong>: How many records per page
- <strong>Can override</strong>: Per-view if needed</p>
<p><strong>Response format:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">  </span><span class="c1">// Total number of records</span>
<span class="w">    </span><span class="nt">&quot;next&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=2&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// URL for next page</span>
<span class="w">    </span><span class="nt">&quot;previous&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">  </span><span class="c1">// URL for previous page (null if on first page)</span>
<span class="w">    </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">  </span><span class="c1">// Actual data (10 records)</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this format?</strong>
- <strong><code>count</code></strong>: Total records (for progress indicators: "Showing 1-10 of 100")
- <strong><code>next</code></strong>: Direct link to next page (convenient for clients)
- <strong><code>previous</code></strong>: Direct link to previous page
- <strong><code>results</code></strong>: Actual data array</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=2&quot;</span>
</code></pre></div>

<p><strong>What happens</strong>: Returns records 11-20 (page 2, assuming 10 per page)</p>
<p><strong>Example response:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;next&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;previous&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Task 11&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Task 12&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">},</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="limitoffsetpagination">LimitOffsetPagination<a class="headerlink" href="#limitoffsetpagination" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/pagination.py</span>
<span class="c1"># Import LimitOffsetPagination class</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">LimitOffsetPagination</span>

<span class="c1"># Custom pagination class using limit/offset approach</span>
<span class="c1"># LimitOffsetPagination = Flexible pagination (?limit=20&amp;offset=40)</span>
<span class="c1"># Good for APIs where clients control exactly how many records to fetch</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BookLimitOffsetPagination</span><span class="p">(</span><span class="n">LimitOffsetPagination</span><span class="p">):</span>
    <span class="c1"># Default number of records if limit is not specified</span>
    <span class="c1"># Example: ?offset=40 (no limit) returns default_limit records starting from offset 40</span>
    <span class="n">default_limit</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="c1"># URL parameter name for limit (how many records to return)</span>
    <span class="c1"># Example: ?limit=20 returns 20 records</span>
    <span class="n">limit_query_param</span> <span class="o">=</span> <span class="s1">&#39;limit&#39;</span>

    <span class="c1"># URL parameter name for offset (how many records to skip)</span>
    <span class="c1"># Example: ?offset=40 skips first 40 records, returns next default_limit records</span>
    <span class="n">offset_query_param</span> <span class="o">=</span> <span class="s1">&#39;offset&#39;</span>

    <span class="c1"># Maximum limit allowed (prevents users from requesting too many records at once)</span>
    <span class="c1"># Example: If user sends ?limit=10000, it&#39;s capped at max_limit=100</span>
    <span class="n">max_limit</span> <span class="o">=</span> <span class="mi">100</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookLimitOffsetPagination</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">BookLimitOffsetPagination</span>
    <span class="c1"># ...</span>
</code></pre></div>

<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>http://localhost:8000/api/books/?limit<span class="o">=</span><span class="m">20</span><span class="p">&amp;</span><span class="nv">offset</span><span class="o">=</span><span class="m">40</span>
</code></pre></div>

<h3 id="cursorpagination">CursorPagination<a class="headerlink" href="#cursorpagination" title="Permanent link">&para;</a></h3>
<p>Best for large datasets. Provides stable, consistent pagination.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/pagination.py</span>
<span class="c1"># Import CursorPagination class</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">CursorPagination</span>

<span class="c1"># Custom pagination class using cursor-based approach</span>
<span class="c1"># CursorPagination = Best for large datasets, provides stable pagination</span>
<span class="c1"># Uses a cursor (pointer) instead of page numbers - more stable when data changes</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BookCursorPagination</span><span class="p">(</span><span class="n">CursorPagination</span><span class="p">):</span>
    <span class="c1"># Number of records per page</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="c1"># Field to use for ordering (required for cursor pagination)</span>
    <span class="c1"># Cursor pagination needs a consistent ordering to work</span>
    <span class="c1"># &#39;-&#39; prefix = descending (newest first)</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="s1">&#39;-created_at&#39;</span>

    <span class="c1"># URL parameter name for cursor</span>
    <span class="c1"># Example: ?cursor=cD0yMDI0LTAxLTAx returns next page after that cursor</span>
    <span class="n">cursor_query_param</span> <span class="o">=</span> <span class="s1">&#39;cursor&#39;</span>
</code></pre></div>

<h2 id="step-by-step-secure-book-api">Step-by-Step: Secure Book API<a class="headerlink" href="#step-by-step-secure-book-api" title="Permanent link">&para;</a></h2>
<p><strong>Note</strong>: This section uses Book API as an example of content that can be public or user-owned. The same patterns apply to Task API or any other model.</p>
<p>Let's upgrade the Book API with authentication and filtering.</p>
<h3 id="step-1-update-book-model">Step 1: Update Book Model<a class="headerlink" href="#step-1-update-book-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">published_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">isbn</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;books&#39;</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>
</code></pre></div>

<p><strong>Create migration:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>manage.py<span class="w"> </span>makemigrations
python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>

<h3 id="step-2-update-book-serializer">Step 2: Update Book Serializer<a class="headerlink" href="#step-2-update-book-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">owner_username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;owner.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="s1">&#39;isbn&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;owner_username&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-filter">Step 3: Create Filter<a class="headerlink" href="#step-3-create-filter" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span><span class="p">)</span>
    <span class="n">published_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>
    <span class="n">published_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_after&#39;</span><span class="p">,</span> <span class="s1">&#39;published_before&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-4-update-book-viewset">Step 4: Update Book ViewSet<a class="headerlink" href="#step-4-update-book-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticatedOrReadOnly</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookSerializer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookFilter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsOwnerOrReadOnly</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticatedOrReadOnly</span><span class="p">,</span> <span class="n">IsOwnerOrReadOnly</span><span class="p">]</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">BookFilter</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-5-test-secure-book-api">Step 5: Test Secure Book API<a class="headerlink" href="#step-5-test-secure-book-api" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Get token</span>
<span class="c1"># Note: By default, JWT uses &#39;username&#39; for authentication.</span>
<span class="c1"># If you&#39;ve configured JWT to use email, replace &#39;username&#39; with &#39;email&#39; below.</span>

<span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;testuser&quot;, &quot;password&quot;: &quot;testpass123&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import sys, json; print(json.load(sys.stdin)[&#39;access&#39;])&quot;</span><span class="k">)</span>

<span class="c1"># Alternative: If using email-based authentication (requires custom JWT serializer)</span>
<span class="c1"># TOKEN=$(curl -s -X POST http://localhost:8000/api/token/ \</span>
<span class="c1">#   -H &quot;Content-Type: application/json&quot; \</span>
<span class="c1">#   -d &#39;{&quot;email&quot;: &quot;test@example.com&quot;, &quot;password&quot;: &quot;testpass123&quot;}&#39; \</span>
<span class="c1">#   | python -c &quot;import sys, json; print(json.load(sys.stdin)[&#39;access&#39;])&quot;)</span>

<span class="c1"># Create book (authenticated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/books/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;title&quot;: &quot;Django for Beginners&quot;,</span>
<span class="s1">    &quot;author&quot;: &quot;John Doe&quot;,</span>
<span class="s1">    &quot;published_date&quot;: &quot;2023-01-15&quot;,</span>
<span class="s1">    &quot;description&quot;: &quot;Learn Django step by step&quot;</span>
<span class="s1">  }&#39;</span>

<span class="c1"># List books (anyone can read)</span>
curl<span class="w"> </span>http://localhost:8000/api/books/

<span class="c1"># Filter by author</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?author=John&quot;</span>

<span class="c1"># Search</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?search=django&quot;</span>

<span class="c1"># Order by title</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?ordering=title&quot;</span>
</code></pre></div>

<h2 id="step-by-step-secure-task-api">Step-by-Step: Secure Task API<a class="headerlink" href="#step-by-step-secure-task-api" title="Permanent link">&para;</a></h2>
<p><strong>Note</strong>: This section focuses on Task API as the primary example (consistent with Level 1). Tasks are typically private, user-owned data, making them perfect for demonstrating authentication and permissions.</p>
<h3 id="step-1-update-task-model">Step 1: Update Task Model<a class="headerlink" href="#step-1-update-task-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;tasks&#39;</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>
</code></pre></div>

<p><strong>Create migration:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>manage.py<span class="w"> </span>makemigrations
python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>

<h3 id="step-2-update-task-serializer">Step 2: Update Task Serializer<a class="headerlink" href="#step-2-update-task-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">owner_username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;owner.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">,</span> <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;owner_username&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-task-filter">Step 3: Create Task Filter<a class="headerlink" href="#step-3-create-task-filter" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">BooleanFilter</span><span class="p">()</span>
    <span class="n">created_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>
    <span class="n">created_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_after&#39;</span><span class="p">,</span> <span class="s1">&#39;created_before&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-4-update-task-viewset">Step 4: Update Task ViewSet<a class="headerlink" href="#step-4-update-task-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskFilter</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">TaskFilter</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">]</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Users can only see their own tasks</span>
        <span class="k">return</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-5-test-secure-task-api">Step 5: Test Secure Task API<a class="headerlink" href="#step-5-test-secure-task-api" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create task (authenticated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;title&quot;: &quot;Learn DRF Level 2&quot;,</span>
<span class="s1">    &quot;desc&quot;: &quot;Complete authentication and permissions&quot;,</span>
<span class="s1">    &quot;completed&quot;: false</span>
<span class="s1">  }&#39;</span>

<span class="c1"># List my tasks</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/

<span class="c1"># Filter by completed</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?completed=false&quot;</span>

<span class="c1"># Search tasks</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?search=DRF&quot;</span>
</code></pre></div>

<h2 id="userprofile-api">UserProfile API<a class="headerlink" href="#userprofile-api" title="Permanent link">&para;</a></h2>
<h3 id="step-1-create-userprofile-model">Step 1: Create UserProfile Model<a class="headerlink" href="#step-1-create-userprofile-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;profile&#39;</span><span class="p">)</span>
    <span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">phone_number</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;avatars/&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;s Profile&quot;</span>
</code></pre></div>

<h3 id="step-2-create-userprofile-serializer">Step 2: Create UserProfile Serializer<a class="headerlink" href="#step-2-create-userprofile-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserProfile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfileSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;user.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;user.email&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">UserProfile</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;bio&#39;</span><span class="p">,</span> <span class="s1">&#39;phone_number&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;avatar&#39;</span><span class="p">,</span> <span class="s1">&#39;website&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-userprofile-viewset">Step 3: Create UserProfile ViewSet<a class="headerlink" href="#step-3-create-userprofile-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserProfileSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfileViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserProfileSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">UserProfile</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h2 id="throttling">Throttling<a class="headerlink" href="#throttling" title="Permanent link">&para;</a></h2>
<h3 id="what-is-throttling">What is Throttling?<a class="headerlink" href="#what-is-throttling" title="Permanent link">&para;</a></h3>
<p><strong>Throttling</strong> is similar to permissions, in that it determines if a request should be authorized. However, throttles indicate a <strong>temporary state</strong>, and are used to control the <strong>rate of requests</strong> that clients can make to an API.</p>
<p><strong>Why Throttling?</strong>
- <strong>Rate limiting</strong>: Prevent API abuse and overuse
- <strong>Resource protection</strong>: Protect server resources from being overwhelmed
- <strong>Fair usage</strong>: Ensure fair distribution of API access
- <strong>Cost control</strong>: Limit expensive operations
- <strong>Business tiers</strong>: Implement different rate limits for different user tiers</p>
<p><strong>Real-world analogy</strong>:
- <strong>No throttling</strong> = Unlimited free samples (everyone takes everything)
- <strong>With throttling</strong> = Limited samples per person (fair distribution)</p>
<p><strong>Important Security Note</strong>: 
The application-level throttling that REST framework provides should <strong>not</strong> be considered a security measure or protection against brute forcing or denial-of-service attacks. Deliberately malicious actors will always be able to spoof IP origins. The built-in throttling implementations use Django's cache framework and non-atomic operations, which may sometimes result in some fuzziness.</p>
<p><strong>The application-level throttling provided by REST framework is intended for:</strong>
- Implementing policies such as different business tiers
- Basic protections against service over-use
- Fair usage policies</p>
<h3 id="how-throttling-is-determined">How Throttling is Determined<a class="headerlink" href="#how-throttling-is-determined" title="Permanent link">&para;</a></h3>
<p>As with permissions and authentication, throttling in REST framework is always defined as a <strong>list of classes</strong>.</p>
<p><strong>The Process</strong>:
1. Before running the main body of the view, each throttle in the list is checked
2. If any throttle check fails, an <code>exceptions.Throttled</code> exception will be raised
3. The main body of the view will not run
4. A <code>429 Too Many Requests</code> response is returned</p>
<p><strong>Why multiple throttles?</strong>
- Different limits for authenticated vs unauthenticated users
- Different constraints on different parts of the API
- Both burst throttling rates and sustained throttling rates
- Example: Limit user to 60 requests per minute AND 1000 requests per day</p>
<h3 id="setting-the-throttling-policy">Setting the Throttling Policy<a class="headerlink" href="#setting-the-throttling-policy" title="Permanent link">&para;</a></h3>
<h4 id="global-throttling-policy">Global Throttling Policy<a class="headerlink" href="#global-throttling-policy" title="Permanent link">&para;</a></h4>
<p>Set default throttling policy globally using <code>DEFAULT_THROTTLE_CLASSES</code> and <code>DEFAULT_THROTTLE_RATES</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.throttling.AnonRateThrottle&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.throttling.UserRateThrottle&#39;</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;anon&#39;</span><span class="p">:</span> <span class="s1">&#39;100/hour&#39;</span><span class="p">,</span>
        <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;1000/hour&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rate Format</strong>:
- The rates can be specified over a period of second, minute, hour or day
- The period must be specified after the <code>/</code> separator using <code>s</code>, <code>m</code>, <code>h</code> or <code>d</code>
- Examples: <code>'100/second'</code>, <code>'60/minute'</code>, <code>'1000/hour'</code>, <code>'10000/day'</code>
- Extended units are also allowed: <code>'second'</code>, <code>'minute'</code>, <code>'hour'</code>, <code>'day'</code>
- Abbreviations work too: <code>'sec'</code>, <code>'min'</code>, <code>'hr'</code> (only first character matters)</p>
<h4 id="per-view-throttling">Per-View Throttling<a class="headerlink" href="#per-view-throttling" title="Permanent link">&para;</a></h4>
<p>Set throttling policy on a per-view basis using <code>APIView</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIView</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">UserRateThrottle</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;request was permitted&#39;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>

<h4 id="per-viewset-throttling">Per-ViewSet Throttling<a class="headerlink" href="#per-viewset-throttling" title="Permanent link">&para;</a></h4>
<p>Set throttling policy on a per-viewset basis:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">UserRateThrottle</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<h4 id="per-action-throttling">Per-Action Throttling<a class="headerlink" href="#per-action-throttling" title="Permanent link">&para;</a></h4>
<p>Set throttle classes for specific actions using the <code>@action</code> decorator:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">action</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">Response</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># ViewSet-level throttling (applies to all actions)</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">UserRateThrottle</span><span class="p">]</span>

    <span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;post&quot;</span><span class="p">],</span> <span class="n">throttle_classes</span><span class="o">=</span><span class="p">[</span><span class="n">UserRateThrottle</span><span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">upload_cover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># This action has its own throttle class</span>
        <span class="c1"># Overrides viewset-level throttle_classes</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;upload was permitted&#39;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>

<p><strong>Note</strong>: Throttle classes set in <code>@action</code> decorator will override any viewset-level class settings.</p>
<h3 id="how-clients-are-identified">How Clients are Identified<a class="headerlink" href="#how-clients-are-identified" title="Permanent link">&para;</a></h3>
<p><strong>IP Address Identification</strong>:
- The <code>X-Forwarded-For</code> HTTP header and <code>REMOTE_ADDR</code> WSGI variable are used to uniquely identify client IP addresses
- If the <code>X-Forwarded-For</code> header is present, it will be used
- Otherwise, the value of the <code>REMOTE_ADDR</code> variable from the WSGI environment will be used</p>
<p><strong>NUM_PROXIES Setting</strong>:
If you need to strictly identify unique client IP addresses, configure the number of application proxies:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;NUM_PROXIES&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Number of proxies in front of your application</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>How it works</strong>:
- If <code>NUM_PROXIES</code> is set to non-zero, the client IP will be identified as the last IP address in the <code>X-Forwarded-For</code> header, after excluding application proxy IP addresses
- If set to zero, the <code>REMOTE_ADDR</code> value will always be used</p>
<p><strong>Important</strong>: If you configure <code>NUM_PROXIES</code>, all clients behind a unique NAT'd gateway will be treated as a single client.</p>
<h3 id="setting-up-the-cache">Setting up the Cache<a class="headerlink" href="#setting-up-the-cache" title="Permanent link">&para;</a></h3>
<p><strong>Cache Backend Requirements</strong>:
- The throttle classes provided by REST framework use Django's cache backend
- You should make sure you've set appropriate cache settings
- The default value of <code>LocMemCache</code> backend should be okay for simple setups</p>
<p><strong>Custom Cache Backend</strong>:
If you need to use a cache other than <code>'default'</code>, create a custom throttle class:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.core.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">caches</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnonRateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomAnonRateThrottle</span><span class="p">(</span><span class="n">AnonRateThrottle</span><span class="p">):</span>
    <span class="n">cache</span> <span class="o">=</span> <span class="n">caches</span><span class="p">[</span><span class="s1">&#39;alternate&#39;</span><span class="p">]</span>  <span class="c1"># Use alternate cache backend</span>
</code></pre></div>

<p><strong>Remember</strong>: Set your custom throttle class in <code>'DEFAULT_THROTTLE_CLASSES'</code> settings key, or using the <code>throttle_classes</code> view attribute.</p>
<h3 id="a-note-on-concurrency">A Note on Concurrency<a class="headerlink" href="#a-note-on-concurrency" title="Permanent link">&para;</a></h3>
<p><strong>Race Conditions</strong>:
- The built-in throttle implementations are open to race conditions
- Under high concurrency, they may allow a few extra requests through
- This is due to non-atomic operations in the cache framework</p>
<p><strong>When to Implement Custom Throttles</strong>:
- If your project relies on guaranteeing the exact number of requests during concurrent requests
- If you need stricter rate limiting
- If you need custom throttling logic beyond what built-in throttles provide</p>
<p><strong>For production applications requiring strict rate limiting</strong>, consider implementing your own throttle class with atomic operations or using external rate limiting services.</p>
<h3 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h3>
<h4 id="anonratethrottle">AnonRateThrottle<a class="headerlink" href="#anonratethrottle" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: The <code>AnonRateThrottle</code> will only ever throttle <strong>unauthenticated users</strong>. The IP address of the incoming request is used to generate a unique key to throttle against.</p>
<p><strong>How rate is determined</strong> (in order of preference):
1. The <code>rate</code> property on the class (if you override <code>AnonRateThrottle</code> and set the property)
2. The <code>DEFAULT_THROTTLE_RATES['anon']</code> setting</p>
<p><strong>When to use</strong>:
- Restrict the rate of requests from unknown sources
- Protect against anonymous abuse
- Encourage user registration</p>
<p><strong>Example</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.throttling.AnonRateThrottle&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;anon&#39;</span><span class="p">:</span> <span class="s1">&#39;100/hour&#39;</span><span class="p">,</span>  <span class="c1"># 100 requests per hour for anonymous users</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="userratethrottle">UserRateThrottle<a class="headerlink" href="#userratethrottle" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: The <code>UserRateThrottle</code> will throttle users to a given rate of requests across the API. The user id is used to generate a unique key to throttle against. Unauthenticated requests will fall back to using the IP address of the incoming request.</p>
<p><strong>How rate is determined</strong> (in order of preference):
1. The <code>rate</code> property on the class (if you override <code>UserRateThrottle</code> and set the property)
2. The <code>DEFAULT_THROTTLE_RATES['user']</code> setting</p>
<p><strong>When to use</strong>:
- Simple global rate restrictions per-user
- Fair usage policies
- Prevent individual users from overusing the API</p>
<p><strong>Example</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.throttling.UserRateThrottle&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;1000/hour&#39;</span><span class="p">,</span>  <span class="c1"># 1000 requests per hour for authenticated users</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Multiple User Throttles (Scoped Throttles)</strong>:
An API may have multiple <code>UserRateThrottles</code> in place at the same time. Override <code>UserRateThrottle</code> and set a unique "scope" for each class:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BurstRateThrottle</span><span class="p">(</span><span class="n">UserRateThrottle</span><span class="p">):</span>
    <span class="n">scope</span> <span class="o">=</span> <span class="s1">&#39;burst&#39;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SustainedRateThrottle</span><span class="p">(</span><span class="n">UserRateThrottle</span><span class="p">):</span>
    <span class="n">scope</span> <span class="o">=</span> <span class="s1">&#39;sustained&#39;</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;api.throttles.BurstRateThrottle&#39;</span><span class="p">,</span>
        <span class="s1">&#39;api.throttles.SustainedRateThrottle&#39;</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;burst&#39;</span><span class="p">:</span> <span class="s1">&#39;60/min&#39;</span><span class="p">,</span>      <span class="c1"># 60 requests per minute</span>
        <span class="s1">&#39;sustained&#39;</span><span class="p">:</span> <span class="s1">&#39;1000/day&#39;</span>  <span class="c1"># 1000 requests per day</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>What this means</strong>:
- Users are limited to 60 requests per minute (burst limit)
- Users are also limited to 1000 requests per day (sustained limit)
- Both limits apply simultaneously
- Useful for preventing both short-term spikes and long-term overuse</p>
<h4 id="scopedratethrottle">ScopedRateThrottle<a class="headerlink" href="#scopedratethrottle" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: The <code>ScopedRateThrottle</code> class can be used to restrict access to <strong>specific parts of the API</strong>. This throttle will only be applied if the view that is being accessed includes a <code>.throttle_scope</code> property.</p>
<p><strong>How it works</strong>:
- The unique throttle key is formed by concatenating the "scope" of the request with the unique user id or IP address
- The allowed request rate is determined by the <code>DEFAULT_THROTTLE_RATES</code> setting using a key from the request "scope"</p>
<p><strong>When to use</strong>:
- Different rate limits for different API endpoints
- Protect resource-intensive endpoints
- Implement tiered access (e.g., read vs write operations)</p>
<p><strong>Example</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIView</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ContactListView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="n">throttle_scope</span> <span class="o">=</span> <span class="s1">&#39;contacts&#39;</span>
    <span class="c1"># ...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ContactDetailView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="n">throttle_scope</span> <span class="o">=</span> <span class="s1">&#39;contacts&#39;</span>
    <span class="c1"># ...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UploadView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="n">throttle_scope</span> <span class="o">=</span> <span class="s1">&#39;uploads&#39;</span>
    <span class="c1"># ...</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.throttling.ScopedRateThrottle&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;contacts&#39;</span><span class="p">:</span> <span class="s1">&#39;1000/day&#39;</span><span class="p">,</span>  <span class="c1"># 1000 requests per day for contact views</span>
        <span class="s1">&#39;uploads&#39;</span><span class="p">:</span> <span class="s1">&#39;20/day&#39;</span>       <span class="c1"># 20 requests per day for upload views</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>What this means</strong>:
- User requests to either <code>ContactListView</code> or <code>ContactDetailView</code> would be restricted to a total of 1000 requests per day
- User requests to <code>UploadView</code> would be restricted to 20 requests per day
- Different scopes allow different rate limits for different parts of your API</p>
<h3 id="custom-throttles">Custom Throttles<a class="headerlink" href="#custom-throttles" title="Permanent link">&para;</a></h3>
<p><strong>Creating Custom Throttles</strong>:
To create a custom throttle, override <code>BaseThrottle</code> and implement <code>.allow_request(self, request, view)</code>. The method should return <code>True</code> if the request should be allowed, and <code>False</code> otherwise.</p>
<p><strong>Optional <code>.wait()</code> Method</strong>:
You may also override the <code>.wait()</code> method. If implemented, <code>.wait()</code> should return a recommended number of seconds to wait before attempting the next request, or <code>None</code>. The <code>.wait()</code> method will only be called if <code>.allow_request()</code> has previously returned <code>False</code>.</p>
<p><strong>Retry-After Header</strong>:
If the <code>.wait()</code> method is implemented and the request is throttled, then a <code>Retry-After</code> header will be included in the response, telling the client how long to wait.</p>
<p><strong>Example 1: Random Rate Throttle</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">throttling</span>

<span class="k">class</span><span class="w"> </span><span class="nc">RandomRateThrottle</span><span class="p">(</span><span class="n">throttling</span><span class="o">.</span><span class="n">BaseThrottle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly throttle 1 in every 10 requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">allow_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span>
</code></pre></div>

<p><strong>Example 2: Custom Throttle with Wait Time</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">throttling</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.core.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">cache</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">timezone</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomRateThrottle</span><span class="p">(</span><span class="n">throttling</span><span class="o">.</span><span class="n">BaseThrottle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom throttle that limits to 10 requests per minute per IP.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">allow_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="c1"># Get client IP</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ident</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="c1"># Create cache key</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;throttle_</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s1">&#39;</span>

        <span class="c1"># Get current request count</span>
        <span class="n">request_count</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Check if limit exceeded</span>
        <span class="k">if</span> <span class="n">request_count</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Increment count</span>
        <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">request_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>  <span class="c1"># Expire in 60 seconds</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return number of seconds to wait before next request.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">60</span>  <span class="c1"># Wait 60 seconds</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_ident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identify the client by IP address.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_forwarded_for</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;HTTP_X_FORWARDED_FOR&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x_forwarded_for</span><span class="p">:</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="n">x_forwarded_for</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;REMOTE_ADDR&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ip</span>
</code></pre></div>

<p><strong>Usage</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.throttles</span><span class="w"> </span><span class="kn">import</span> <span class="n">CustomRateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">CustomRateThrottle</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<h3 id="custom-throttling-example">Custom Throttling Example<a class="headerlink" href="#custom-throttling-example" title="Permanent link">&para;</a></h3>
<p><strong>Per-Action Custom Throttle</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookCreateThrottle</span><span class="p">(</span><span class="n">UserRateThrottle</span><span class="p">):</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="s1">&#39;5/day&#39;</span>  <span class="c1"># Limit book creation to 5 per day</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.throttles</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookCreateThrottle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_throttles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override to apply different throttles to different actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">&#39;create&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">BookCreateThrottle</span><span class="p">()]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_throttles</span><span class="p">()</span>
</code></pre></div>

<p><strong>Alternative: Using throttle_classes attribute</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">action</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.throttles</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookCreateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">UserRateThrottle</span><span class="p">]</span>  <span class="c1"># Default for all actions</span>

    <span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">],</span> <span class="n">throttle_classes</span><span class="o">=</span><span class="p">[</span><span class="n">BookCreateThrottle</span><span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_book</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="c1"># This action uses BookCreateThrottle</span>
        <span class="c1"># ...</span>
</code></pre></div>

<h2 id="exception-handling">Exception Handling<a class="headerlink" href="#exception-handling" title="Permanent link">&para;</a></h2>
<h3 id="what-is-exception-handling">What is Exception Handling?<a class="headerlink" href="#what-is-exception-handling" title="Permanent link">&para;</a></h3>
<p><strong>Exception Handling</strong> allows you to customize how errors are returned to clients.</p>
<p><strong>The Problem</strong>: By default, DRF returns errors in its own format. You might want:
- Consistent error format across all endpoints
- More user-friendly error messages
- Additional error details
- Custom error codes</p>
<p><strong>Why Custom Exception Handling?</strong>
- <strong>Consistency</strong>: All errors follow same format
- <strong>User experience</strong>: Clear, helpful error messages
- <strong>Debugging</strong>: Include useful debugging information
- <strong>Security</strong>: Don't expose sensitive details
- <strong>Professional</strong>: Production-ready error responses</p>
<p><strong>Real-world analogy</strong>:
- <strong>Default errors</strong> = Generic error messages (not helpful)
- <strong>Custom errors</strong> = Clear, actionable error messages (helpful)</p>
<h3 id="basic-exception-handler">Basic Exception Handler<a class="headerlink" href="#basic-exception-handler" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Exception occurs in view
2. DRF calls your custom exception handler
3. Handler processes exception
4. Returns custom error response</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py (create this file)</span>
<span class="c1"># Import DRF&#39;s default exception handler - we&#39;ll call it first</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="c1"># Import Response to return custom error responses</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">Response</span>
<span class="c1"># Import HTTP status codes</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">status</span>
<span class="c1"># Import Django settings to check DEBUG mode</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="c1"># Import logging to log errors for debugging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="c1"># Create logger for this module</span>
<span class="c1"># Logs will help you debug issues in production</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Custom exception handler function</span>
<span class="c1"># DRF calls this function whenever an exception occurs in a view</span>
<span class="c1"># exc = the exception that was raised</span>
<span class="c1"># context = dictionary with request, view, and other context</span>
<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom exception handler for DRF.</span>
<span class="sd">    Returns consistent error format for all exceptions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Step 1: Call DRF&#39;s default exception handler first</span>
    <span class="c1"># This handles common DRF exceptions (ValidationError, PermissionDenied, etc.)</span>
    <span class="c1"># Returns Response object if it handled the exception, None otherwise</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="c1"># Step 2: If DRF handled it, customize the response format</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Create custom error response structure</span>
        <span class="c1"># This ensures all errors follow the same format</span>
        <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Quick indicator that request failed</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>  <span class="c1"># HTTP status code (400, 401, 403, etc.)</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">get_error_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">exc</span><span class="p">),</span>  <span class="c1"># User-friendly message</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>  <span class="c1"># Detailed error information</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># Exception class name (for debugging)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1"># Replace DRF&#39;s default error format with our custom format</span>
        <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

        <span class="c1"># Log error for debugging (helps track issues in production)</span>
        <span class="c1"># exc_info=True includes full traceback in logs</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Step 3: Handle exceptions DRF doesn&#39;t catch (unexpected errors)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># For unexpected errors (500 Internal Server Error)</span>
        <span class="c1"># These are errors DRF doesn&#39;t know how to handle</span>
        <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;An unexpected error occurred&#39;</span><span class="p">,</span>
                <span class="c1"># In DEBUG mode: show actual error (helpful for development)</span>
                <span class="c1"># In production: show generic message (don&#39;t expose sensitive details)</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1"># Create new Response for unexpected errors</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">custom_response_data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_500_INTERNAL_SERVER_ERROR</span><span class="p">)</span>

        <span class="c1"># Log unexpected errors with full traceback</span>
        <span class="c1"># logger.exception() automatically includes traceback</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Return the response (either customized DRF response or new 500 response)</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_error_message</span><span class="p">(</span><span class="n">status_code</span><span class="p">,</span> <span class="n">exc</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get user-friendly error message based on status code.</span>
<span class="sd">    Converts technical HTTP status codes into readable messages for users.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Dictionary mapping HTTP status codes to user-friendly messages</span>
    <span class="c1"># These messages are shown to API clients (more helpful than just status codes)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">400</span><span class="p">:</span> <span class="s1">&#39;Invalid request data&#39;</span><span class="p">,</span>  <span class="c1"># Bad Request - client sent invalid data</span>
        <span class="mi">401</span><span class="p">:</span> <span class="s1">&#39;Authentication required&#39;</span><span class="p">,</span>  <span class="c1"># Unauthorized - need to login</span>
        <span class="mi">403</span><span class="p">:</span> <span class="s1">&#39;Permission denied&#39;</span><span class="p">,</span>  <span class="c1"># Forbidden - logged in but no permission</span>
        <span class="mi">404</span><span class="p">:</span> <span class="s1">&#39;Resource not found&#39;</span><span class="p">,</span>  <span class="c1"># Not Found - resource doesn&#39;t exist</span>
        <span class="mi">405</span><span class="p">:</span> <span class="s1">&#39;Method not allowed&#39;</span><span class="p">,</span>  <span class="c1"># Method Not Allowed - wrong HTTP method</span>
        <span class="mi">429</span><span class="p">:</span> <span class="s1">&#39;Too many requests&#39;</span><span class="p">,</span>  <span class="c1"># Too Many Requests - rate limit exceeded</span>
        <span class="mi">500</span><span class="p">:</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">,</span>  <span class="c1"># Internal Server Error - server problem</span>
    <span class="p">}</span>
    <span class="c1"># Return message for status code, or default message if status code not in dictionary</span>
    <span class="c1"># .get() returns None if key not found, so we provide default &#39;An error occurred&#39;</span>
    <span class="k">return</span> <span class="n">messages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">status_code</span><span class="p">,</span> <span class="s1">&#39;An error occurred&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Add to settings.py:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="c1"># DRF configuration</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ... other settings (authentication, permissions, etc.) ...</span>

    <span class="c1"># Set custom exception handler</span>
    <span class="c1"># This tells DRF to use our custom_exception_handler function instead of the default one</span>
    <span class="c1"># Path format: &#39;app_name.module_name.function_name&#39;</span>
    <span class="c1"># When any exception occurs in any view, DRF will call this function</span>
    <span class="s1">&#39;EXCEPTION_HANDLER&#39;</span><span class="p">:</span> <span class="s1">&#39;api.exceptions.custom_exception_handler&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this location?</strong>
- Centralized: All errors go through one handler
- Consistent: Same format for all errors
- Maintainable: Update error format in one place</p>
<h3 id="handling-authentication-errors">Handling Authentication Errors<a class="headerlink" href="#handling-authentication-errors" title="Permanent link">&para;</a></h3>
<p><strong>Customize authentication error responses:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">AuthenticationFailed</span><span class="p">,</span> <span class="n">NotAuthenticated</span><span class="p">,</span> <span class="n">PermissionDenied</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">status</span>

<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle authentication errors specifically</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="p">(</span><span class="n">AuthenticationFailed</span><span class="p">,</span> <span class="n">NotAuthenticated</span><span class="p">)):</span>
            <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Authentication failed. Please provide valid credentials.&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;authentication_failed&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;Make sure you include a valid token in the Authorization header&#39;</span>
                    <span class="p">},</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

        <span class="c1"># Handle permission errors</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">PermissionDenied</span><span class="p">):</span>
            <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;You do not have permission to perform this action&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;permission_denied&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;required_permission&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
                    <span class="p">},</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

        <span class="c1"># Handle other errors</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">get_error_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">exc</span><span class="p">),</span>
                    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<p><strong>Why handle authentication errors separately?</strong>
- <strong>User-friendly</strong>: Clear message about what went wrong
- <strong>Actionable</strong>: Tells user how to fix it
- <strong>Security</strong>: Doesn't expose sensitive details
- <strong>Consistent</strong>: Same format for all auth errors</p>
<h3 id="handling-validation-errors">Handling Validation Errors<a class="headerlink" href="#handling-validation-errors" title="Permanent link">&para;</a></h3>
<p><strong>Customize validation error format:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">ValidationError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle validation errors</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
            <span class="c1"># Format field errors nicely</span>
            <span class="n">formatted_errors</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">errors</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="n">formatted_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">errors</span> <span class="k">else</span> <span class="s1">&#39;Invalid value&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">formatted_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>

            <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Validation failed&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;validation_error&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="n">formatted_errors</span>
                    <span class="p">},</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

        <span class="c1"># ... handle other errors ...</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<p><strong>Why format validation errors?</strong>
- <strong>Clarity</strong>: Each field error is clear
- <strong>User-friendly</strong>: Easy to understand what's wrong
- <strong>Actionable</strong>: User knows which fields to fix</p>
<h3 id="handling-jwt-token-errors">Handling JWT Token Errors<a class="headerlink" href="#handling-jwt-token-errors" title="Permanent link">&para;</a></h3>
<p><strong>Specific handling for JWT errors:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvalidToken</span><span class="p">,</span> <span class="n">TokenError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle JWT token errors</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="p">(</span><span class="n">InvalidToken</span><span class="p">,</span> <span class="n">TokenError</span><span class="p">)):</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

            <span class="c1"># Provide helpful messages based on error</span>
            <span class="k">if</span> <span class="s1">&#39;expired&#39;</span> <span class="ow">in</span> <span class="n">error_message</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Token has expired. Please refresh your token.&#39;</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;token_expired&#39;</span>
            <span class="k">elif</span> <span class="s1">&#39;invalid&#39;</span> <span class="ow">in</span> <span class="n">error_message</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Invalid token. Please login again.&#39;</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;token_invalid&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Token error. Please login again.&#39;</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;token_error&#39;</span>

            <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">401</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
                    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
                        <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;Use /api/token/ to get a new token, or /api/token/refresh/ to refresh&#39;</span>
                    <span class="p">},</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>
            <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="mi">401</span>

        <span class="c1"># ... handle other errors ...</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<p><strong>Why handle JWT errors specifically?</strong>
- <strong>Clear guidance</strong>: Tells user how to fix token issues
- <strong>Actionable</strong>: Provides endpoint URLs for token refresh
- <strong>User-friendly</strong>: Explains what went wrong</p>
<h3 id="production-vs-development-error-messages">Production vs Development Error Messages<a class="headerlink" href="#production-vs-development-error-messages" title="Permanent link">&para;</a></h3>
<p><strong>Show detailed errors in development, generic in production:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>

<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># In development: show detailed errors</span>
        <span class="c1"># In production: show generic errors</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error_details</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
                <span class="s1">&#39;traceback&#39;</span><span class="p">:</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="s1">&#39;__traceback__&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;view&#39;</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">)</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;request_method&#39;</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">method</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Production: don&#39;t expose sensitive details</span>
            <span class="n">error_details</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">get_error_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;get_error_message&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;An error occurred&#39;</span><span class="p">,</span>
                <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span>
            <span class="p">}</span>

        <span class="n">custom_response_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                <span class="o">**</span><span class="n">error_details</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">custom_response_data</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<p><strong>Why different messages?</strong>
- <strong>Development</strong>: Detailed errors help debugging
- <strong>Production</strong>: Generic errors protect security
- <strong>Best practice</strong>: Never expose stack traces in production</p>
<h3 id="complete-example">Complete Example<a class="headerlink" href="#complete-example" title="Permanent link">&para;</a></h3>
<p><strong>Full-featured exception handler:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/exceptions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">exception_handler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">status</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AuthenticationFailed</span><span class="p">,</span>
    <span class="n">NotAuthenticated</span><span class="p">,</span>
    <span class="n">PermissionDenied</span><span class="p">,</span>
    <span class="n">ValidationError</span><span class="p">,</span>
    <span class="n">NotFound</span><span class="p">,</span>
    <span class="n">MethodNotAllowed</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvalidToken</span><span class="p">,</span> <span class="n">TokenError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">custom_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Comprehensive exception handler for DRF.</span>
<span class="sd">    Provides consistent, user-friendly error responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Call DRF&#39;s default exception handler</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="c1"># Request object</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Customize based on exception type</span>
        <span class="n">error_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

        <span class="c1"># Authentication errors</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="p">(</span><span class="n">AuthenticationFailed</span><span class="p">,</span> <span class="n">NotAuthenticated</span><span class="p">)):</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">401</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Authentication required&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;authentication_required&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;Include a valid token in Authorization header: Bearer &lt;token&gt;&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Permission errors</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">PermissionDenied</span><span class="p">):</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">403</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Permission denied&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;permission_denied&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;You do not have permission to perform this action&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># JWT token errors</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="p">(</span><span class="n">InvalidToken</span><span class="p">,</span> <span class="n">TokenError</span><span class="p">)):</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">401</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid or expired token&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;token_error&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;Get a new token at /api/token/ or refresh at /api/token/refresh/&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Validation errors</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
            <span class="n">formatted_errors</span> <span class="o">=</span> <span class="n">format_validation_errors</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Validation failed&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;validation_error&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="n">formatted_errors</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Not found errors</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">NotFound</span><span class="p">):</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">404</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Resource not found&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;not_found&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;hint&#39;</span><span class="p">:</span> <span class="s1">&#39;The requested resource does not exist&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Method not allowed</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">MethodNotAllowed</span><span class="p">):</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">405</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Method not allowed&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;method_not_allowed&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;allowed_methods&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">allowed_methods</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="s1">&#39;allowed_methods&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="p">[]</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Generic error</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">get_error_message</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">),</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">}</span>
            <span class="p">}</span>

        <span class="c1"># Add exception type for debugging</span>
        <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

        <span class="c1"># Log error</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error </span><span class="si">{</span><span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;status_code&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;request_path&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;request_method&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">exc_info</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span>
        <span class="p">)</span>

        <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span>

    <span class="c1"># Handle unexpected errors (500)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">error_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">,</span>
                <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;server_error&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="s1">&#39;An unexpected error occurred&#39;</span>
                <span class="p">},</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1"># Log unexpected errors</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">error_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">],</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_500_INTERNAL_SERVER_ERROR</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span>

<span class="k">def</span><span class="w"> </span><span class="nf">format_validation_errors</span><span class="p">(</span><span class="n">errors</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Format DRF validation errors into user-friendly format&quot;&quot;&quot;</span>
    <span class="n">formatted</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">field_errors</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_errors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="c1"># Take first error message</span>
                <span class="n">formatted</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_errors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">field_errors</span> <span class="k">else</span> <span class="s1">&#39;Invalid value&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_errors</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># Nested errors</span>
                <span class="n">formatted</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_validation_errors</span><span class="p">(</span><span class="n">field_errors</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">formatted</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">field_errors</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">formatted</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_error_message</span><span class="p">(</span><span class="n">status_code</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get user-friendly error message&quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">400</span><span class="p">:</span> <span class="s1">&#39;Bad request&#39;</span><span class="p">,</span>
        <span class="mi">401</span><span class="p">:</span> <span class="s1">&#39;Authentication required&#39;</span><span class="p">,</span>
        <span class="mi">403</span><span class="p">:</span> <span class="s1">&#39;Permission denied&#39;</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="s1">&#39;Resource not found&#39;</span><span class="p">,</span>
        <span class="mi">405</span><span class="p">:</span> <span class="s1">&#39;Method not allowed&#39;</span><span class="p">,</span>
        <span class="mi">429</span><span class="p">:</span> <span class="s1">&#39;Too many requests&#39;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">:</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">messages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">status_code</span><span class="p">,</span> <span class="s1">&#39;An error occurred&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Why this comprehensive handler?</strong>
- <strong>Handles all error types</strong>: Authentication, permissions, validation, etc.
- <strong>User-friendly messages</strong>: Clear, actionable error messages
- <strong>Consistent format</strong>: Same structure for all errors
- <strong>Production-ready</strong>: Different messages for dev/prod
- <strong>Logging</strong>: Tracks all errors for debugging</p>
<h3 id="error-response-format">Error Response Format<a class="headerlink" href="#error-response-format" title="Permanent link">&para;</a></h3>
<p><strong>Standard error response structure:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;status_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Authentication required&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authentication_required&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;hint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Include a valid token in Authorization header&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AuthenticationFailed&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this format?</strong>
- <strong><code>success</code></strong>: Quick check if request succeeded
- <strong><code>error.status_code</code></strong>: HTTP status code
- <strong><code>error.message</code></strong>: Human-readable message
- <strong><code>error.details</code></strong>: Additional information
- <strong><code>error.type</code></strong>: Exception class name (for debugging)</p>
<h3 id="testing-exception-handler">Testing Exception Handler<a class="headerlink" href="#testing-exception-handler" title="Permanent link">&para;</a></h3>
<p><strong>Test your exception handler:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/tests.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.test</span><span class="w"> </span><span class="kn">import</span> <span class="n">APITestCase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">status</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExceptionHandlerTest</span><span class="p">(</span><span class="n">APITestCase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="s1">&#39;testuser&#39;</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s1">&#39;testpass123&#39;</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_authentication_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Request without token</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/api/tasks/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">401</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;details&#39;</span><span class="p">][</span><span class="s1">&#39;code&#39;</span><span class="p">],</span> <span class="s1">&#39;authentication_required&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_validation_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Login first</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">force_authenticate</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="c1"># Invalid data - empty title</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/api/tasks/&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>  <span class="c1"># Empty title should fail validation</span>
            <span class="s1">&#39;completed&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;details&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;details&#39;</span><span class="p">][</span><span class="s1">&#39;fields&#39;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_permission_denied</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Login as regular user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">force_authenticate</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="c1"># Try to access admin-only endpoint (if you have one)</span>
        <span class="c1"># This would return 403 if permission denied</span>
        <span class="c1"># response = self.client.get(&#39;/api/admin/tasks/&#39;)</span>
        <span class="c1"># self.assertEqual(response.status_code, 403)</span>
</code></pre></div>

<p><strong>Why test exception handler?</strong>
- <strong>Verify format</strong>: Ensure errors follow expected format
- <strong>Catch bugs</strong>: Find issues in error handling
- <strong>Documentation</strong>: Shows how errors are returned</p>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h3>
<p><strong>1. Consistent Format</strong>
- Use same structure for all errors
- Include status code, message, details
- Make it easy for clients to parse</p>
<p><strong>2. User-Friendly Messages</strong>
- Avoid technical jargon
- Provide actionable hints
- Explain what went wrong</p>
<p><strong>3. Security</strong>
- Don't expose sensitive details in production
- Hide stack traces from users
- Log detailed errors server-side</p>
<p><strong>4. Logging</strong>
- Log all errors for debugging
- Include request context
- Use appropriate log levels</p>
<p><strong>5. Error Codes</strong>
- Use consistent error codes
- Make codes searchable
- Document all error codes</p>
<h2 id="testing-authenticated-apis">Testing Authenticated APIs<a class="headerlink" href="#testing-authenticated-apis" title="Permanent link">&para;</a></h2>
<p>See <a href="CURL_GUIDE.html">CURL_GUIDE.md</a> for detailed examples. Quick reference:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Get token</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;user&quot;, &quot;password&quot;: &quot;pass&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.access&#39;</span><span class="k">)</span>

<span class="c1"># Use token</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/

<span class="c1"># Refresh token</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/refresh/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;refresh&quot;: &quot;your_refresh_token&quot;}&#39;</span>
</code></pre></div>

<h2 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-complete-secure-book-api-filtering-pagination">Exercise 1: Complete Secure Book API (Filtering &amp; Pagination)<a class="headerlink" href="#exercise-1-complete-secure-book-api-filtering-pagination" title="Permanent link">&para;</a></h3>
<ol>
<li>Add filtering by author and date range to Book API</li>
<li>Add search functionality across title, author, and description</li>
<li>Add ordering by title, author, published_date, and created_at</li>
<li>Implement pagination (PageNumberPagination with 10 items per page)</li>
<li>Test all filtering, searching, ordering, and pagination with cURL</li>
</ol>
<h3 id="exercise-2-task-filtering-searching">Exercise 2: Task Filtering &amp; Searching<a class="headerlink" href="#exercise-2-task-filtering-searching" title="Permanent link">&para;</a></h3>
<ol>
<li>Add priority field to Task model</li>
<li>Create TaskFilter with priority filtering and date range filtering</li>
<li>Add search functionality for title and description</li>
<li>Add ordering by priority, title, and created_at</li>
<li>Test filtering, searching, and ordering with cURL</li>
</ol>
<h3 id="exercise-3-custom-exception-handler">Exercise 3: Custom Exception Handler<a class="headerlink" href="#exercise-3-custom-exception-handler" title="Permanent link">&para;</a></h3>
<ol>
<li>Create custom exception handler with consistent error format</li>
<li>Add user-friendly error messages for common status codes</li>
<li>Configure exception handler in settings.py</li>
<li>Test error responses (send invalid data, access non-existent resource, etc.)</li>
<li>Verify error format is consistent across all endpoints</li>
</ol>
<h3 id="exercise-4-advanced-pagination">Exercise 4: Advanced Pagination<a class="headerlink" href="#exercise-4-advanced-pagination" title="Permanent link">&para;</a></h3>
<ol>
<li>Implement LimitOffsetPagination for Book API</li>
<li>Set default_limit to 20 and max_limit to 100</li>
<li>Test pagination with different limit and offset values</li>
<li>Compare with PageNumberPagination (which is easier to use?)</li>
</ol>
<h2 id="common-errors-and-solutions">Common Errors and Solutions<a class="headerlink" href="#common-errors-and-solutions" title="Permanent link">&para;</a></h2>
<h3 id="error-1-django_filtersexceptionsfieldnotfound-field-title_contains-not-found">Error 1: <code>django_filters.exceptions.FieldNotFound: Field 'title_contains' not found</code><a class="headerlink" href="#error-1-django_filtersexceptionsfieldnotfound-field-title_contains-not-found" title="Permanent link">&para;</a></h3>
<p><strong>Error Message</strong>:</p>
<div class="codehilite"><pre><span></span><code>django_filters.exceptions.FieldNotFound: Field &#39;title_contains&#39; not found
</code></pre></div>

<p><strong>Why This Happens</strong>:
- Trying to filter by field that doesn't exist in model
- Field name typo in filterset_fields
- Custom filter field not defined before using in Meta.fields</p>
<p><strong>How to Fix</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># WRONG - Field &#39;title_contains&#39; not defined</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="c1"># title_contains not defined here!</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title_contains&#39;</span><span class="p">]</span>  <span class="c1"># ❌ Field not defined</span>

<span class="c1"># CORRECT - Define field first</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="c1"># Define custom filter field</span>
    <span class="n">title_contains</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span>
        <span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">,</span>  <span class="c1"># Model field name</span>
        <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span>  <span class="c1"># Lookup type</span>
    <span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title_contains&#39;</span><span class="p">]</span>  <span class="c1"># ✅ Now defined</span>
</code></pre></div>

<p><strong>Prevention</strong>: Always define custom filter fields before listing them in <code>Meta.fields</code>.</p>
<hr />
<h3 id="error-2-rest_frameworkexceptionsparseerror-malformed-request">Error 2: <code>rest_framework.exceptions.ParseError: Malformed request</code><a class="headerlink" href="#error-2-rest_frameworkexceptionsparseerror-malformed-request" title="Permanent link">&para;</a></h3>
<p><strong>Error Message</strong>:</p>
<div class="codehilite"><pre><span></span><code>rest_framework.exceptions.ParseError: Malformed request
</code></pre></div>

<p><strong>Why This Happens</strong>:
- Invalid JSON in request body
- Missing Content-Type header
- Malformed query parameters</p>
<p><strong>How to Fix</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># WRONG - Missing Content-Type header</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;title&quot;: &quot;Task&quot;}&#39;</span>

<span class="c1"># CORRECT - Include Content-Type header</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;title&quot;: &quot;Task&quot;}&#39;</span>

<span class="c1"># WRONG - Invalid JSON</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{title: &quot;Task&quot;}&#39;</span><span class="w">  </span><span class="c1"># ❌ Missing quotes around key</span>

<span class="c1"># CORRECT - Valid JSON</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;title&quot;: &quot;Task&quot;}&#39;</span><span class="w">  </span><span class="c1"># ✅ Valid JSON</span>
</code></pre></div>

<p><strong>Prevention</strong>: 
- Always include <code>Content-Type: application/json</code> header
- Validate JSON syntax before sending
- Use proper JSON formatting</p>
<hr />
<h3 id="error-3-djangocoreexceptionsfielderror-cannot-resolve-keyword-title__icontains-into-field">Error 3: <code>django.core.exceptions.FieldError: Cannot resolve keyword 'title__icontains' into field</code><a class="headerlink" href="#error-3-djangocoreexceptionsfielderror-cannot-resolve-keyword-title__icontains-into-field" title="Permanent link">&para;</a></h3>
<p><strong>Error Message</strong>:</p>
<div class="codehilite"><pre><span></span><code>django.core.exceptions.FieldError: Cannot resolve keyword &#39;title__icontains&#39; into field
</code></pre></div>

<p><strong>Why This Happens</strong>:
- Using lookup expression in wrong place
- Field doesn't exist in model
- Typo in field name</p>
<p><strong>How to Fix</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># WRONG - Using lookup expression directly in filterset_fields</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title__icontains&#39;</span><span class="p">]</span>  <span class="c1"># ❌ Can&#39;t use lookup expressions here</span>

<span class="c1"># CORRECT - Use FilterSet with custom field</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span><span class="p">)</span>  <span class="c1"># ✅ Define in FilterSet</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">TaskFilter</span>  <span class="c1"># ✅ Use FilterSet</span>
</code></pre></div>

<p><strong>Prevention</strong>: 
- Use <code>filterset_fields</code> only for exact matches
- Use <code>FilterSet</code> for advanced lookups (icontains, gte, lte, etc.)</p>
<hr />
<h3 id="error-4-rest_frameworkexceptionsnotfound-invalid-page">Error 4: <code>rest_framework.exceptions.NotFound: Invalid page.</code><a class="headerlink" href="#error-4-rest_frameworkexceptionsnotfound-invalid-page" title="Permanent link">&para;</a></h3>
<p><strong>Error Message</strong>:</p>
<div class="codehilite"><pre><span></span><code>rest_framework.exceptions.NotFound: Invalid page.
</code></pre></div>

<p><strong>Why This Happens</strong>:
- Requesting page number that doesn't exist
- Invalid page parameter format
- Page number out of range</p>
<p><strong>How to Fix</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># WRONG - Page number too high (only 5 pages exist, requesting page 10)</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=10&quot;</span>

<span class="c1"># CORRECT - Check total pages first</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.count, .next, .previous&#39;</span>

<span class="c1"># WRONG - Invalid page format</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=abc&quot;</span><span class="w">  </span><span class="c1"># ❌ Not a number</span>

<span class="c1"># CORRECT - Use valid page number</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?page=1&quot;</span><span class="w">  </span><span class="c1"># ✅ Valid</span>
</code></pre></div>

<p><strong>Prevention</strong>: 
- Always check response for <code>count</code> and <code>next</code> fields
- Handle pagination errors in client code
- Validate page numbers before making requests</p>
<hr />
<h3 id="error-5-filtering-not-working-all-results-returned">Error 5: Filtering not working - all results returned<a class="headerlink" href="#error-5-filtering-not-working-all-results-returned" title="Permanent link">&para;</a></h3>
<p><strong>Problem</strong>: Filtering doesn't work, returns all results instead of filtered results.</p>
<p><strong>Why This Happens</strong>:
- Filter backend not configured
- FilterSet not assigned to view
- Field name mismatch</p>
<p><strong>How to Fix</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># WRONG - Missing filter backend</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">]</span>  <span class="c1"># ❌ No filter_backends!</span>

<span class="c1"># CORRECT - Add filter backend</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">]</span>  <span class="c1"># ✅ Enable filtering</span>
    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">]</span>

<span class="c1"># WRONG - FilterSet not assigned</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="c1"># ... filter definition ...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="c1"># filterset_class not set!  # ❌</span>

<span class="c1"># CORRECT - Assign FilterSet</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">]</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">TaskFilter</span>  <span class="c1"># ✅ Use FilterSet</span>
</code></pre></div>

<p><strong>Prevention</strong>: 
- Always include filter backend in <code>filter_backends</code>
- Assign <code>filterset_class</code> when using FilterSet
- Verify filter configuration in view</p>
<hr />
<h3 id="general-debugging-tips-for-level-2b">General Debugging Tips for Level 2B<a class="headerlink" href="#general-debugging-tips-for-level-2b" title="Permanent link">&para;</a></h3>
<p><strong>1. Test Filters Separately</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test each filter individually</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?completed=false&quot;</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?created_after=2024-01-01&quot;</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/tasks/?title=django&quot;</span>
</code></pre></div>

<p><strong>2. Check Filter Configuration</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># In view, verify filter setup</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Filter backends:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_backends</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FilterSet class:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterset_class</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Search fields:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_fields</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ordering fields:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordering_fields</span><span class="p">)</span>
</code></pre></div>

<p><strong>3. Verify Pagination</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check pagination settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">PageNumberPagination</span>
<span class="n">pagination</span> <span class="o">=</span> <span class="n">PageNumberPagination</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Page size:&quot;</span><span class="p">,</span> <span class="n">pagination</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
</code></pre></div>

<p><strong>4. Test Exception Handler</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test different error scenarios</span>
<span class="c1"># Invalid data</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;invalid&quot;: &quot;data&quot;}&#39;</span>

<span class="c1"># Non-existent resource</span>
curl<span class="w"> </span>http://localhost:8000/api/tasks/99999/
</code></pre></div>

<h2 id="add-ons">Add-ons<a class="headerlink" href="#add-ons" title="Permanent link">&para;</a></h2>
<h3 id="add-on-1-custom-filter-backend">Add-on 1: Custom Filter Backend<a class="headerlink" href="#add-on-1-custom-filter-backend" title="Permanent link">&para;</a></h3>
<p>Create a custom filter backend for advanced filtering logic:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseFilterBackend</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomFilterBackend</span><span class="p">(</span><span class="n">BaseFilterBackend</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom filter backend for complex filtering logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="c1"># Add custom filtering logic here</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;my_custom_filter&#39;</span><span class="p">):</span>
            <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">queryset</span>
</code></pre></div>

<h3 id="add-on-2-custom-pagination-class">Add-on 2: Custom Pagination Class<a class="headerlink" href="#add-on-2-custom-pagination-class" title="Permanent link">&para;</a></h3>
<p>Create a custom pagination class with additional metadata:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/pagination.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">PageNumberPagination</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomPageNumberPagination</span><span class="p">(</span><span class="n">PageNumberPagination</span><span class="p">):</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">page_size_query_param</span> <span class="o">=</span> <span class="s1">&#39;page_size&#39;</span>
    <span class="n">max_page_size</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_paginated_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_paginated_response</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Add custom metadata</span>
        <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;custom_field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;custom_value&#39;</span>
        <span class="k">return</span> <span class="n">response</span>
</code></pre></div>

<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Congratulations! You've completed Level 2B. You now know:</p>
<ul>
<li>✅ Filtering with django-filter</li>
<li>✅ Searching across multiple fields</li>
<li>✅ Ordering and sorting results</li>
<li>✅ Pagination strategies</li>
<li>✅ Exception handling</li>
<li>✅ Testing authenticated APIs</li>
</ul>
<p><strong>Ready for Level 3?</strong> Continue to <a href="LEVEL_3A_ADVANCED.html">Level 3A: Advanced - Relationships &amp; Query Optimization</a> to learn about model relationships, nested serializers, and query optimization!</p>
<hr />
<p><strong>Resources:</strong>
- <a href="https://www.django-rest-framework.org/api-guide/filtering/">DRF Filtering</a>
- <a href="https://www.django-rest-framework.org/api-guide/filtering/#searchfilter">DRF Searching</a>
- <a href="https://www.django-rest-framework.org/api-guide/pagination/">DRF Pagination</a>
- <a href="https://django-filter.readthedocs.io/">django-filter</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid footer-custom">

      <div class="footer-col footer-left">
        <strong>Flask Training Guide</strong>
      </div>

      <div class="footer-col footer-center">
        © 2026 Pragnakalp Techlabs
      </div>

      <div class="footer-col footer-right">
        Made by<br>
        Rahul · Nikunj · Neel · Dhvanil · Mansi · Darshit
      </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.sections", "navigation.top", "navigation.footer", "toc.follow", "content.code.copy"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>