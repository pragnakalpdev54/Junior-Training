
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pragnakalpdev54.github.io/Junior-Training/POSTGRESQL_SETUP.html">
      
      
        <link rel="prev" href="CURL_GUIDE.html">
      
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>PostgreSQL Setup - DRF Training Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#postgresql-setup-guide-for-django" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="DRF Training Guide" class="md-header__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DRF Training Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PostgreSQL Setup
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="DRF Training Guide" class="md-nav__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DRF Training Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Course Levels
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Course Levels
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_0_BEGINNER.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 0 - Beginner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_1_FOUNDATIONS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 1 - Foundations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_2_INTERMEDIATE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 2 - Intermediate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_3_ADVANCED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 3 - Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_4_SCALABLE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 4 - Scalable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_5_EXPERT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 5 - Expert
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Tools & Extras
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools & Extras
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CURL_GUIDE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cURL Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Setup
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="POSTGRESQL_SETUP.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Setup
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-ubuntudebian" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux (Ubuntu/Debian)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macos" class="md-nav__link">
    <span class="md-ellipsis">
      
        macOS
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        Windows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-database-and-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Database and User
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Database and User">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-access-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Access PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-verify-connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Verify Connection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Django Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Django Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-install-required-packages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Install Required Packages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-settingspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update settings.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-env-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create .env File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-settingspy-to-use-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update settings.py to Use .env
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-add-env-to-gitignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Add .env to .gitignore
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration from SQLite
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration from SQLite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-export-data-from-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Export Data from SQLite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-database-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Database Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-new-database-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create New Database Schema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-load-data-into-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Load Data into PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-verify-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Verify Migration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection-pooling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection Pooling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection Pooling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-django-db-connection-pool" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 1: django-db-connection-pool
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-pgbouncer-advanced" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 2: PgBouncer (Advanced)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backup and Restore
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup and Restore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backup Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restore-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restore Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated-backups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automated Backups
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimization-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optimization Tips
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optimization Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Indexes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-query-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Query Optimization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-connection-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Connection Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-postgresql-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. PostgreSQL Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Development (.env)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-connection-refused" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Connection Refused
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-authentication-failed" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Authentication Failed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-database-does-not-exist" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Database Does Not Exist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Permission Denied
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-port-already-in-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Port Already in Use
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Connection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="postgresql-setup-guide-for-django">PostgreSQL Setup Guide for Django<a class="headerlink" href="#postgresql-setup-guide-for-django" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This guide will help you set up PostgreSQL for your Django REST Framework project. While Django works with SQLite by default, PostgreSQL is recommended for production and provides better performance, advanced features, and scalability.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#installation">Installation</a></li>
<li><a href="#creating-database-and-user">Creating Database and User</a></li>
<li><a href="#django-configuration">Django Configuration</a></li>
<li><a href="#migration-from-sqlite">Migration from SQLite</a></li>
<li><a href="#connection-pooling">Connection Pooling</a></li>
<li><a href="#backup-and-restore">Backup and Restore</a></li>
<li><a href="#optimization-tips">Optimization Tips</a></li>
<li><a href="#environment-variables">Environment Variables</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ol>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<h3 id="linux-ubuntudebian">Linux (Ubuntu/Debian)<a class="headerlink" href="#linux-ubuntudebian" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Update package list</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update

<span class="c1"># Install PostgreSQL</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>postgresql<span class="w"> </span>postgresql-contrib

<span class="c1"># Install Python PostgreSQL adapter</span>
pip<span class="w"> </span>install<span class="w"> </span>psycopg2-binary

<span class="c1"># Start PostgreSQL service</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>postgresql
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>postgresql

<span class="c1"># Verify installation</span>
psql<span class="w"> </span>--version
</code></pre></div>

<h3 id="macos">macOS<a class="headerlink" href="#macos" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Using Homebrew</span>
brew<span class="w"> </span>install<span class="w"> </span>postgresql@15

<span class="c1"># Start PostgreSQL service</span>
brew<span class="w"> </span>services<span class="w"> </span>start<span class="w"> </span>postgresql@15

<span class="c1"># Install Python adapter</span>
pip<span class="w"> </span>install<span class="w"> </span>psycopg2-binary
</code></pre></div>

<h3 id="windows">Windows<a class="headerlink" href="#windows" title="Permanent link">&para;</a></h3>
<ol>
<li>Download PostgreSQL from <a href="https://www.postgresql.org/download/windows/">postgresql.org/download/windows/</a></li>
<li>Run the installer and follow the setup wizard</li>
<li>Remember the password you set for the <code>postgres</code> user</li>
<li>Install Python adapter:
   <code>bash
   pip install psycopg2-binary</code></li>
</ol>
<h2 id="creating-database-and-user">Creating Database and User<a class="headerlink" href="#creating-database-and-user" title="Permanent link">&para;</a></h2>
<h3 id="step-1-access-postgresql">Step 1: Access PostgreSQL<a class="headerlink" href="#step-1-access-postgresql" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Switch to postgres user (Linux/macOS)</span>
sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql

<span class="c1"># Or on Windows, use psql from the PostgreSQL bin directory</span>
<span class="c1"># Usually: C:\Program Files\PostgreSQL\15\bin\psql.exe</span>
</code></pre></div>

<h3 id="step-2-create-database">Step 2: Create Database<a class="headerlink" href="#step-2-create-database" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">-- Create a new database</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">rest_api_db</span><span class="p">;</span>

<span class="c1">-- Create a user with password</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">rest_api_user</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">&#39;your_secure_password_here&#39;</span><span class="p">;</span>

<span class="c1">-- Grant privileges</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">rest_api_db</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">rest_api_user</span><span class="p">;</span>

<span class="c1">-- For PostgreSQL 15+, also grant schema privileges</span>
<span class="err">\</span><span class="k">c</span><span class="w"> </span><span class="n">rest_api_db</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">rest_api_user</span><span class="p">;</span>

<span class="c1">-- Exit psql</span>
<span class="err">\</span><span class="n">q</span>
</code></pre></div>

<h3 id="step-3-verify-connection">Step 3: Verify Connection<a class="headerlink" href="#step-3-verify-connection" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test connection</span>
psql<span class="w"> </span>-U<span class="w"> </span>rest_api_user<span class="w"> </span>-d<span class="w"> </span>rest_api_db<span class="w"> </span>-h<span class="w"> </span>localhost

<span class="c1"># If prompted for password, enter the password you set</span>
<span class="c1"># Type \q to exit</span>
</code></pre></div>

<h2 id="django-configuration">Django Configuration<a class="headerlink" href="#django-configuration" title="Permanent link">&para;</a></h2>
<h3 id="step-1-install-required-packages">Step 1: Install Required Packages<a class="headerlink" href="#step-1-install-required-packages" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>psycopg2-binary<span class="w"> </span>python-decouple
</code></pre></div>

<h3 id="step-2-update-settingspy">Step 2: Update settings.py<a class="headerlink" href="#step-2-update-settingspy" title="Permanent link">&para;</a></h3>
<p>Update your <code>core/settings.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">decouple</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>

<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span>

<span class="c1"># Database configuration</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_NAME&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;rest_api_db&#39;</span><span class="p">),</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_USER&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;rest_api_user&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PASSWORD&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_HOST&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PORT&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;5432&#39;</span><span class="p">),</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;connect_timeout&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="step-3-create-env-file">Step 3: Create .env File<a class="headerlink" href="#step-3-create-env-file" title="Permanent link">&para;</a></h3>
<p>Create a <code>.env</code> file in your project root (same level as <code>manage.py</code>):</p>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> Database Configuration
DB_NAME=rest_api_db
DB_USER=rest_api_user
DB_PASSWORD=your_secure_password_here
DB_HOST=localhost
DB_PORT=5432

<span class="gh">#</span> Django Secret Key (keep this secret!)
SECRET_KEY=your-secret-key-here
DEBUG=True
</code></pre></div>

<h3 id="step-4-update-settingspy-to-use-env">Step 4: Update settings.py to Use .env<a class="headerlink" href="#step-4-update-settingspy-to-use-env" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">decouple</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>

<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span>

<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">)</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>

<span class="c1"># ... other settings ...</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_NAME&#39;</span><span class="p">),</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_USER&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PASSWORD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_HOST&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PORT&#39;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="step-5-add-env-to-gitignore">Step 5: Add .env to .gitignore<a class="headerlink" href="#step-5-add-env-to-gitignore" title="Permanent link">&para;</a></h3>
<p>Create or update <code>.gitignore</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="na">.env</span>
<span class="err">*</span><span class="na">.pyc</span>
<span class="nf">__pycache__</span><span class="err">/</span>
<span class="nf">db.sqlite3</span>
<span class="nf">venv</span><span class="err">/</span>
<span class="err">*</span><span class="na">.log</span>
</code></pre></div>

<h2 id="migration-from-sqlite">Migration from SQLite<a class="headerlink" href="#migration-from-sqlite" title="Permanent link">&para;</a></h2>
<p>If you've been using SQLite and want to migrate to PostgreSQL:</p>
<h3 id="step-1-export-data-from-sqlite">Step 1: Export Data from SQLite<a class="headerlink" href="#step-1-export-data-from-sqlite" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create a data dump</span>
python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>&gt;<span class="w"> </span>data.json
</code></pre></div>

<h3 id="step-2-update-database-settings">Step 2: Update Database Settings<a class="headerlink" href="#step-2-update-database-settings" title="Permanent link">&para;</a></h3>
<p>Switch to PostgreSQL in <code>settings.py</code> (as shown above).</p>
<h3 id="step-3-create-new-database-schema">Step 3: Create New Database Schema<a class="headerlink" href="#step-3-create-new-database-schema" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create migrations (if needed)</span>
python<span class="w"> </span>manage.py<span class="w"> </span>makemigrations

<span class="c1"># Apply migrations to PostgreSQL</span>
python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>

<h3 id="step-4-load-data-into-postgresql">Step 4: Load Data into PostgreSQL<a class="headerlink" href="#step-4-load-data-into-postgresql" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Load the data</span>
python<span class="w"> </span>manage.py<span class="w"> </span>loaddata<span class="w"> </span>data.json
</code></pre></div>

<h3 id="step-5-verify-migration">Step 5: Verify Migration<a class="headerlink" href="#step-5-verify-migration" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check data</span>
python<span class="w"> </span>manage.py<span class="w"> </span>shell
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">api.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>  <span class="c1"># Should match your SQLite count</span>
</code></pre></div>

<h2 id="connection-pooling">Connection Pooling<a class="headerlink" href="#connection-pooling" title="Permanent link">&para;</a></h2>
<p>For production applications, use connection pooling to improve performance:</p>
<h3 id="option-1-django-db-connection-pool">Option 1: django-db-connection-pool<a class="headerlink" href="#option-1-django-db-connection-pool" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>django-db-connection-pool
</code></pre></div>

<p>Update <code>settings.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;dj_db_conn_pool.backends.postgresql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_NAME&#39;</span><span class="p">),</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_USER&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PASSWORD&#39;</span><span class="p">),</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_HOST&#39;</span><span class="p">),</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">(</span><span class="s1">&#39;DB_PORT&#39;</span><span class="p">),</span>
        <span class="s1">&#39;POOL_OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;POOL_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s1">&#39;MAX_OVERFLOW&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
            <span class="s1">&#39;RECYCLE&#39;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="option-2-pgbouncer-advanced">Option 2: PgBouncer (Advanced)<a class="headerlink" href="#option-2-pgbouncer-advanced" title="Permanent link">&para;</a></h3>
<p>For high-traffic applications, consider using PgBouncer as a connection pooler.</p>
<h2 id="backup-and-restore">Backup and Restore<a class="headerlink" href="#backup-and-restore" title="Permanent link">&para;</a></h2>
<h3 id="backup-database">Backup Database<a class="headerlink" href="#backup-database" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Using pg_dump</span>
pg_dump<span class="w"> </span>-U<span class="w"> </span>rest_api_user<span class="w"> </span>-d<span class="w"> </span>rest_api_db<span class="w"> </span>-F<span class="w"> </span>c<span class="w"> </span>-f<span class="w"> </span>backup.dump

<span class="c1"># Or as SQL file</span>
pg_dump<span class="w"> </span>-U<span class="w"> </span>rest_api_user<span class="w"> </span>-d<span class="w"> </span>rest_api_db<span class="w"> </span>&gt;<span class="w"> </span>backup.sql
</code></pre></div>

<h3 id="restore-database">Restore Database<a class="headerlink" href="#restore-database" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># From custom format</span>
pg_restore<span class="w"> </span>-U<span class="w"> </span>rest_api_user<span class="w"> </span>-d<span class="w"> </span>rest_api_db<span class="w"> </span>backup.dump

<span class="c1"># From SQL file</span>
psql<span class="w"> </span>-U<span class="w"> </span>rest_api_user<span class="w"> </span>-d<span class="w"> </span>rest_api_db<span class="w"> </span>&lt;<span class="w"> </span>backup.sql
</code></pre></div>

<h3 id="automated-backups">Automated Backups<a class="headerlink" href="#automated-backups" title="Permanent link">&para;</a></h3>
<p>Create a backup script <code>backup_db.sh</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nv">DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d_%H%M%S<span class="k">)</span>
<span class="nv">BACKUP_DIR</span><span class="o">=</span><span class="s2">&quot;/path/to/backups&quot;</span>
<span class="nv">DB_NAME</span><span class="o">=</span><span class="s2">&quot;rest_api_db&quot;</span>
<span class="nv">DB_USER</span><span class="o">=</span><span class="s2">&quot;rest_api_user&quot;</span>

pg_dump<span class="w"> </span>-U<span class="w"> </span><span class="nv">$DB_USER</span><span class="w"> </span>-d<span class="w"> </span><span class="nv">$DB_NAME</span><span class="w"> </span>-F<span class="w"> </span>c<span class="w"> </span>-f<span class="w"> </span><span class="nv">$BACKUP_DIR</span>/backup_<span class="nv">$DATE</span>.dump

<span class="c1"># Keep only last 7 days of backups</span>
find<span class="w"> </span><span class="nv">$BACKUP_DIR</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;backup_*.dump&quot;</span><span class="w"> </span>-mtime<span class="w"> </span>+7<span class="w"> </span>-delete
</code></pre></div>

<h2 id="optimization-tips">Optimization Tips<a class="headerlink" href="#optimization-tips" title="Permanent link">&para;</a></h2>
<h3 id="1-indexes">1. Indexes<a class="headerlink" href="#1-indexes" title="Permanent link">&para;</a></h3>
<p>Add indexes for frequently queried fields:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># In your models.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]),</span>
        <span class="p">]</span>
</code></pre></div>

<h3 id="2-query-optimization">2. Query Optimization<a class="headerlink" href="#2-query-optimization" title="Permanent link">&para;</a></h3>
<p>Use <code>select_related</code> and <code>prefetch_related</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Instead of</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="c1"># Use</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</code></pre></div>

<h3 id="3-connection-settings">3. Connection Settings<a class="headerlink" href="#3-connection-settings" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1"># ... other settings ...</span>
        <span class="s1">&#39;CONN_MAX_AGE&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>  <span class="c1"># Reuse connections for 10 minutes</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;connect_timeout&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="s1">&#39;-c statement_timeout=30000&#39;</span><span class="p">,</span>  <span class="c1"># 30 seconds</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="4-postgresql-configuration">4. PostgreSQL Configuration<a class="headerlink" href="#4-postgresql-configuration" title="Permanent link">&para;</a></h3>
<p>Edit <code>/etc/postgresql/15/main/postgresql.conf</code> (adjust path for your version):</p>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> Memory settings
shared_buffers = 256MB
effective_cache_size = 1GB
work_mem = 16MB

<span class="gh">#</span> Connection settings
max_connections = 100
</code></pre></div>

<h2 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h2>
<h3 id="development-env">Development (.env)<a class="headerlink" href="#development-env" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>DB_NAME=rest_api_db
DB_USER=rest_api_user
DB_PASSWORD=dev_password
DB_HOST=localhost
DB_PORT=5432
DEBUG=True
SECRET_KEY=dev-secret-key
</code></pre></div>

<h3 id="production">Production<a class="headerlink" href="#production" title="Permanent link">&para;</a></h3>
<p>Use environment variables or a secrets manager:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Set environment variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DB_NAME</span><span class="o">=</span>production_db
<span class="nb">export</span><span class="w"> </span><span class="nv">DB_USER</span><span class="o">=</span>prod_user
<span class="nb">export</span><span class="w"> </span><span class="nv">DB_PASSWORD</span><span class="o">=</span>secure_production_password
<span class="nb">export</span><span class="w"> </span><span class="nv">DB_HOST</span><span class="o">=</span>db.example.com
<span class="nb">export</span><span class="w"> </span><span class="nv">DB_PORT</span><span class="o">=</span><span class="m">5432</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span>False
<span class="nb">export</span><span class="w"> </span><span class="nv">SECRET_KEY</span><span class="o">=</span>production-secret-key
</code></pre></div>

<p>Or use a <code>.env.production</code> file (never commit this):</p>
<div class="codehilite"><pre><span></span><code>DB_NAME=production_db
DB_USER=prod_user
DB_PASSWORD=secure_production_password
DB_HOST=db.example.com
DB_PORT=5432
DEBUG=False
SECRET_KEY=production-secret-key
</code></pre></div>

<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<h4 id="1-connection-refused">1. Connection Refused<a class="headerlink" href="#1-connection-refused" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check if PostgreSQL is running</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql

<span class="c1"># Start if not running</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>postgresql
</code></pre></div>

<h4 id="2-authentication-failed">2. Authentication Failed<a class="headerlink" href="#2-authentication-failed" title="Permanent link">&para;</a></h4>
<ul>
<li>Verify username and password in <code>.env</code></li>
<li>Check PostgreSQL user exists: <code>\du</code> in psql</li>
<li>Verify user has database privileges</li>
</ul>
<h4 id="3-database-does-not-exist">3. Database Does Not Exist<a class="headerlink" href="#3-database-does-not-exist" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1">-- List databases</span>
<span class="err">\</span><span class="n">l</span>

<span class="c1">-- Create if missing</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">rest_api_db</span><span class="p">;</span>
</code></pre></div>

<h4 id="4-permission-denied">4. Permission Denied<a class="headerlink" href="#4-permission-denied" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1">-- Grant privileges</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">rest_api_db</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">rest_api_user</span><span class="p">;</span>
<span class="err">\</span><span class="k">c</span><span class="w"> </span><span class="n">rest_api_db</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">rest_api_user</span><span class="p">;</span>
</code></pre></div>

<h4 id="5-port-already-in-use">5. Port Already in Use<a class="headerlink" href="#5-port-already-in-use" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check what&#39;s using port 5432</span>
sudo<span class="w"> </span>lsof<span class="w"> </span>-i<span class="w"> </span>:5432

<span class="c1"># Or change PostgreSQL port in postgresql.conf</span>
</code></pre></div>

<h3 id="testing-connection">Testing Connection<a class="headerlink" href="#testing-connection" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># In Django shell</span>
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">shell</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">connection</span>

<span class="c1"># Test connection</span>
<span class="n">connection</span><span class="o">.</span><span class="n">ensure_connection</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Connection successful!&quot;</span><span class="p">)</span>

<span class="c1"># Check database name</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="nb">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">DATABASES</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">][</span><span class="s1">&#39;NAME&#39;</span><span class="p">])</span>
</code></pre></div>

<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Now that PostgreSQL is set up:</p>
<ol>
<li>Update your Django settings (as shown above)</li>
<li>Run migrations: <code>python manage.py migrate</code></li>
<li>Create a superuser: <code>python manage.py createsuperuser</code></li>
<li>Start building your API!</li>
</ol>
<p>For more information, refer to:
- <a href="https://docs.djangoproject.com/en/stable/ref/databases/">Django Database Documentation</a>
- <a href="https://www.postgresql.org/docs/">PostgreSQL Documentation</a>
- <a href="https://www.psycopg.org/docs/">psycopg2 Documentation</a></p>
<hr />
<p><strong>Ready to continue?</strong> Return to <a href="LEVEL_1_FOUNDATIONS.html">Level 1: Foundations</a> to start building your API!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.sections", "navigation.expand", "navigation.instant", "toc.integrate", "content.code.copy"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>