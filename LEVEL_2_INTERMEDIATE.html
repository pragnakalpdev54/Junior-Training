
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pragnakalpdev54.github.io/Junior-Training/LEVEL_2_INTERMEDIATE.html">
      
      
        <link rel="prev" href="LEVEL_1_FOUNDATIONS.html">
      
      
        <link rel="next" href="LEVEL_3_ADVANCED.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Level 2 - Intermediate - DRF Training Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#level-2-intermediate-authentication-permissions-querysets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="DRF Training Guide" class="md-header__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DRF Training Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Level 2 - Intermediate
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="DRF Training Guide" class="md-nav__button md-logo" aria-label="DRF Training Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DRF Training Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LEARNING_GUIDE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_0_BEGINNER.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 0 - Beginner
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_1_FOUNDATIONS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 1 - Foundations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Level 2 - Intermediate
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="LEVEL_2_INTERMEDIATE.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 2 - Intermediate
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django-authentication-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Django Authentication System
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Django Authentication System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Authentication?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-django-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Django Users
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Users
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-user-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom User Model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drf-authentication-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        DRF Authentication Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DRF Authentication Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication-vs-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication vs Authorization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drf-authentication-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        DRF Authentication Types
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DRF Authentication Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-session-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Session Authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-token-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Token Authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-jwt-authentication-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. JWT Authentication (Recommended)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jwt-authentication-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWT Authentication Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JWT Authentication Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-install-package" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Install Package
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-add-to-installed_apps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Add to INSTALLED_APPS
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-configure-jwt-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Configure JWT Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-create-user-registration-view" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Create User Registration View
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-test-jwt-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6: Test JWT Authentication
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permissions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        What are Permissions?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-permission-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-in Permission Classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Built-in Permission Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-allowany" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. AllowAny
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-isauthenticated" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. IsAuthenticated
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-isadminuser" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. IsAdminUser
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-isauthenticatedorreadonly" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. IsAuthenticatedOrReadOnly
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Permissions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isownerorreadonly" class="md-nav__link">
    <span class="md-ellipsis">
      
        IsOwnerOrReadOnly
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-at-view-level" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permission at View Level
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Filtering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-django-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install django-filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-in-settingspy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure in settings.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Filtering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-filtering-with-filterset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Filtering with FilterSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Searching
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Searching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-searching" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Searching?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searchfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        SearchFilter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-lookup-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Search Lookup Expressions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ordering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ordering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Ordering?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orderingfilter" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrderingFilter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pagination
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pagination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-pagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is Pagination?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagenumberpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        PageNumberPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitoffsetpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        LimitOffsetPagination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cursorpagination" class="md-nav__link">
    <span class="md-ellipsis">
      
        CursorPagination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Book API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Book API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-book-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Book Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-book-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Book Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-book-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Book ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Book API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step: Secure Task API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step: Secure Task API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-task-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Update Task Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-update-task-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Update Task Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-task-filter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create Task Filter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-task-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Update Task ViewSet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-test-secure-task-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Test Secure Task API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#userprofile-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        UserProfile API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UserProfile API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-userprofile-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Create UserProfile Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-userprofile-serializer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create UserProfile Serializer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-userprofile-viewset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Create UserProfile ViewSet
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Throttling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Throttling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure Throttling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Throttling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-authenticated-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Authenticated APIs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercises
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-complete-secure-book-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Complete Secure Book API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-userprofile-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: UserProfile API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-task-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Task Filtering
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-ons
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add-ons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-on-1-custom-jwt-claims" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 1: Custom JWT Claims
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-on-2-rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 2: Rate Limiting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-on-3-permission-mixins" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add-on 3: Permission Mixins
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_3_ADVANCED.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 3 - Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_4_SCALABLE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 4 - Scalable
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LEVEL_5_EXPERT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level 5 - Expert
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Tools & Extras
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools & Extras
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CURL_GUIDE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cURL Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="POSTGRESQL_SETUP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="level-2-intermediate-authentication-permissions-querysets">Level 2: Intermediate - Authentication, Permissions &amp; Querysets<a class="headerlink" href="#level-2-intermediate-authentication-permissions-querysets" title="Permanent link">&para;</a></h1>
<h2 id="goal">Goal<a class="headerlink" href="#goal" title="Permanent link">&para;</a></h2>
<p>Build secure APIs with robust authentication, permissions, filtering, searching, ordering, and pagination. By the end of this level, you'll be able to create production-ready, secure REST APIs.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#django-authentication-system">Django Authentication System</a></li>
<li><a href="#drf-authentication-classes">DRF Authentication Classes</a></li>
<li><a href="#jwt-authentication-setup">JWT Authentication Setup</a></li>
<li><a href="#permissions">Permissions</a></li>
<li><a href="#filtering">Filtering</a></li>
<li><a href="#searching">Searching</a></li>
<li><a href="#ordering">Ordering</a></li>
<li><a href="#pagination">Pagination</a></li>
<li><a href="#step-by-step-secure-book-api">Step-by-Step: Secure Book API</a></li>
<li><a href="#step-by-step-secure-task-api">Step-by-Step: Secure Task API</a></li>
<li><a href="#userprofile-api">UserProfile API</a></li>
<li><a href="#throttling">Throttling</a></li>
<li><a href="#testing-authenticated-apis">Testing Authenticated APIs</a></li>
<li><a href="#exercises">Exercises</a></li>
<li><a href="#add-ons">Add-ons</a></li>
</ol>
<h2 id="django-authentication-system">Django Authentication System<a class="headerlink" href="#django-authentication-system" title="Permanent link">&para;</a></h2>
<h3 id="why-authentication">Why Authentication?<a class="headerlink" href="#why-authentication" title="Permanent link">&para;</a></h3>
<p><strong>The Problem</strong>: Without authentication, anyone can access your API and modify data. This is a security risk!</p>
<p><strong>Real-world analogy</strong>: 
- <strong>No authentication</strong> = House with no locks (anyone can enter)
- <strong>With authentication</strong> = House with keys (only authorized people enter)</p>
<p><strong>Why it matters</strong>:
- <strong>Security</strong>: Protect user data
- <strong>Personalization</strong>: Show users only their data
- <strong>Accountability</strong>: Track who did what
- <strong>Access control</strong>: Limit what users can do</p>
<h3 id="understanding-django-users">Understanding Django Users<a class="headerlink" href="#understanding-django-users" title="Permanent link">&para;</a></h3>
<p>Django comes with a built-in User model that handles user accounts:</p>
<p><strong>What is a User model?</strong>
- Represents a person using your application
- Stores login credentials (username, password)
- Tracks user information (email, name)
- Manages permissions and access levels</p>
<p><strong>Why use Django's User model?</strong>
- <strong>Ready-made</strong>: No need to build from scratch
- <strong>Secure</strong>: Password hashing built-in
- <strong>Tested</strong>: Used by millions of applications
- <strong>Flexible</strong>: Can be extended for custom needs</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="c1"># User fields</span>
<span class="n">user</span><span class="o">.</span><span class="n">username</span>  <span class="c1"># Username</span>
<span class="n">user</span><span class="o">.</span><span class="n">email</span>     <span class="c1"># shed password</span>
<span class="n">user</span><span class="o">.</span><span class="n">first_nameEmail</span>
<span class="n">user</span><span class="o">.</span><span class="n">password</span>  <span class="c1"># Ha</span>
<span class="n">user</span><span class="o">.</span><span class="n">last_name</span>
<span class="n">user</span><span class="o">.</span><span class="n">is_staff</span>  <span class="c1"># Admin access</span>
<span class="n">user</span><span class="o">.</span><span class="n">is_active</span> <span class="c1"># Account status</span>
<span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span>
<span class="n">user</span><span class="o">.</span><span class="n">date_joined</span>
</code></pre></div>

<h3 id="creating-users">Creating Users<a class="headerlink" href="#creating-users" title="Permanent link">&para;</a></h3>
<p><strong>Why multiple methods?</strong>
- Different methods serve different purposes
- Some hash passwords (secure), others don't (insecure)
- Always use methods that hash passwords!</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># In Django shell: python manage.py shell</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="c1"># Method 1: create_user (recommended - hashes password)</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;john&#39;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="s1">&#39;john@example.com&#39;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s1">&#39;securepassword123&#39;</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Why <code>create_user</code>?</strong>
- <strong>Password hashing</strong>: Converts password to secure hash (can't be reversed)
- <strong>Validation</strong>: Checks username/email format
- <strong>Default values</strong>: Sets sensible defaults (is_active=True)
- <strong>Security</strong>: Never store plain text passwords!</p>
<p><strong>What is password hashing?</strong>
- Plain password: <code>"mypassword123"</code> ❌ (stored as-is, anyone can read)
- Hashed password: <code>"pbkdf2_sha256$..."</code> ✅ (one-way encryption, can't be reversed)
- When user logs in, Django hashes their input and compares with stored hash</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Method 2: create_superuser</span>
<span class="n">admin</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_superuser</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="s1">&#39;admin@example.com&#39;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s1">&#39;admin123&#39;</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Why <code>create_superuser</code>?</strong>
- Creates user with admin privileges (<code>is_staff=True</code>, <code>is_superuser=True</code>)
- Can access Django admin panel
- Has all permissions by default
- Use for site administrators</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Method 3: Using User.objects.create (not recommended - password not hashed)</span>
</code></pre></div>

<p><strong>Why NOT use <code>User.objects.create</code>?</strong>
- <strong>Security risk</strong>: Password stored in plain text!
- No validation
- No password hashing
- <strong>Never use this for passwords!</strong></p>
<h3 id="custom-user-model">Custom User Model<a class="headerlink" href="#custom-user-model" title="Permanent link">&para;</a></h3>
<p><strong>Why create a custom user model?</strong></p>
<p><strong>The Problem</strong>: Django's default User model has limited fields (username, email, password). What if you need:
- Phone numbers
- Profile pictures
- Bio/description
- Custom fields</p>
<p><strong>The Solution</strong>: Extend Django's User model with your own fields.</p>
<p><strong>When to use custom user model?</strong>
- <strong>Production apps</strong>: Almost always
- <strong>Need extra fields</strong>: Phone, avatar, bio, etc.
- <strong>Different login</strong>: Email instead of username
- <strong>Before first migration</strong>: Must set before creating database</p>
<p><strong>Why before first migration?</strong>
- Changing user model after migration is very difficult
- Requires database restructuring
- Can cause data loss
- <strong>Always decide early!</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">AbstractUser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomUser</span><span class="p">(</span><span class="n">AbstractUser</span><span class="p">):</span>
    <span class="n">phone_number</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;avatars/&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>AbstractUser</code></strong>: Base class with all default User fields (username, email, password, etc.)
- <strong>Extend it</strong>: Add your custom fields
- <strong>Inherits everything</strong>: All User functionality still works
- <strong>Add custom fields</strong>: Phone, bio, avatar, etc.</p>
<p><strong>Update settings.py:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">AUTH_USER_MODEL</span> <span class="o">=</span> <span class="s1">&#39;api.CustomUser&#39;</span>
</code></pre></div>

<p><strong>What this does</strong>:
- Tells Django to use your custom user model
- Replaces default User model everywhere
- Must be set before first migration!</p>
<p><strong>Important</strong>: Set this before your first migration! Once migrations are created, changing is very difficult.</p>
<h2 id="drf-authentication-classes">DRF Authentication Classes<a class="headerlink" href="#drf-authentication-classes" title="Permanent link">&para;</a></h2>
<h3 id="authentication-vs-authorization">Authentication vs Authorization<a class="headerlink" href="#authentication-vs-authorization" title="Permanent link">&para;</a></h3>
<p><strong>These are two different but related concepts:</strong></p>
<ul>
<li><strong>Authentication</strong>: Who are you? (Identity)</li>
<li>Verifies user's identity</li>
<li>"Are you really John?"</li>
<li>
<p>Examples: Login, password check, token verification</p>
</li>
<li>
<p><strong>Authorization</strong>: What can you do? (Permissions)</p>
</li>
<li>Determines what user can access</li>
<li>"Can John edit this book?"</li>
<li>Examples: Admin only, owner only, read-only</li>
</ul>
<p><strong>Real-world analogy</strong>:
- <strong>Authentication</strong> = Showing ID at entrance (proving who you are)
- <strong>Authorization</strong> = Security guard checking if you have access to VIP area (what you can do)</p>
<p><strong>Why both?</strong>
- Authentication without authorization = Everyone can do everything
- Authorization without authentication = Can't identify users
- <strong>Need both</strong> for secure APIs!</p>
<p><strong>The Flow</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">sends</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="p">(</span><span class="n">who</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">you</span><span class="err">?</span><span class="p">)</span>
<span class="mf">2.</span><span class="w"> </span><span class="kr">If</span><span class="w"> </span><span class="n">authenticated</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="n">permissions</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">Authorization</span><span class="w"> </span><span class="p">(</span><span class="n">what</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">do</span><span class="err">?</span><span class="p">)</span>
<span class="mf">3.</span><span class="w"> </span><span class="kr">If</span><span class="w"> </span><span class="n">authorized</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">Allow</span><span class="w"> </span><span class="n">access</span>
<span class="mf">4.</span><span class="w"> </span><span class="kr">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">authorized</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">Deny</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="p">(</span><span class="mf">403</span><span class="w"> </span><span class="kr">For</span><span class="n">bidden</span><span class="p">)</span>
</code></pre></div>

<h3 id="drf-authentication-types">DRF Authentication Types<a class="headerlink" href="#drf-authentication-types" title="Permanent link">&para;</a></h3>
<h4 id="1-session-authentication">1. Session Authentication<a class="headerlink" href="#1-session-authentication" title="Permanent link">&para;</a></h4>
<p><strong>What is Session Authentication?</strong></p>
<p>Uses Django's session framework. Stores authentication state on the server.</p>
<p><strong>How it works</strong>:
1. User logs in with username/password
2. Server creates a session (stored in database/cache)
3. Server sends session ID in cookie to browser
4. Browser sends cookie with each request
5. Server checks session to identify user</p>
<p><strong>Why use it?</strong>
- <strong>Simple</strong>: Built into Django
- <strong>Secure</strong>: Session stored server-side
- <strong>Good for</strong>: Web apps (same domain)
- <strong>Automatic</strong>: Browser handles cookies</p>
<p><strong>Limitations</strong>:
- <strong>Same-origin only</strong>: Doesn't work well with mobile apps
- <strong>Cookie-based</strong>: Requires browser cookie support
- <strong>Server storage</strong>: Needs database/cache for sessions</p>
<p><strong>When to use</strong>:
- Web applications (React, Vue on same domain)
- Traditional web apps
- When you control both frontend and backend</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this configuration?</strong>
- Sets default authentication for all views
- Can override per-view if needed
- Multiple authentication classes can be used (tries each until one works)</p>
<h4 id="2-token-authentication">2. Token Authentication<a class="headerlink" href="#2-token-authentication" title="Permanent link">&para;</a></h4>
<p>Simple token-based authentication. Good for client-server setups.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install</span>
pip<span class="w"> </span>install<span class="w"> </span>djangorestframework-simplejwt
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rest_framework_simplejwt&#39;</span><span class="p">,</span>  <span class="c1"># Add this</span>
<span class="p">]</span>

<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework_simplejwt.authentication.JWTAuthentication&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="3-jwt-authentication-recommended">3. JWT Authentication (Recommended)<a class="headerlink" href="#3-jwt-authentication-recommended" title="Permanent link">&para;</a></h4>
<p><strong>What is JWT?</strong></p>
<p><strong>JWT</strong> = JSON Web Token</p>
<p><strong>How it works</strong>:
1. User logs in with username/password
2. Server creates a JWT token (contains user info)
3. Server sends token to client
4. Client stores token (localStorage, memory)
5. Client sends token with each request in header
6. Server verifies token and extracts user info</p>
<p><strong>Why JWT is popular</strong>:
- <strong>Stateless</strong>: No server-side storage needed
- <strong>Scalable</strong>: Works across multiple servers
- <strong>Mobile-friendly</strong>: Works with mobile apps
- <strong>Industry standard</strong>: Used by major companies
- <strong>Self-contained</strong>: Token has all user info</p>
<p><strong>JWT Structure</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Header</span><span class="o">.</span><span class="n">Payload</span><span class="o">.</span><span class="n">Signature</span>

<span class="n">Example</span><span class="p">:</span>
<span class="n">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="o">.</span><span class="n">eyJ1c2VyX2lkIjoxfQ</span><span class="o">.</span><span class="n">signature</span>
</code></pre></div>

<p><strong>Parts</strong>:
- <strong>Header</strong>: Algorithm and token type
- <strong>Payload</strong>: User data (ID, username, etc.)
- <strong>Signature</strong>: Ensures token wasn't tampered with</p>
<p><strong>Why stateless matters</strong>:
- <strong>Session auth</strong>: Server stores session → needs database lookup
- <strong>JWT auth</strong>: Token contains info → no database lookup needed
- <strong>Result</strong>: Faster, more scalable</p>
<p><strong>Security considerations</strong>:
- Tokens expire (access token: 1 hour, refresh token: 1 day)
- Tokens can be blacklisted if compromised
- Always use HTTPS in production (tokens in headers)</p>
<p><strong>When to use JWT</strong>:
- ✅ Mobile apps (iOS, Android)
- ✅ Single Page Applications (SPA)
- ✅ Microservices
- ✅ APIs used by multiple clients
- ❌ Not ideal for traditional server-rendered apps</p>
<h2 id="jwt-authentication-setup">JWT Authentication Setup<a class="headerlink" href="#jwt-authentication-setup" title="Permanent link">&para;</a></h2>
<h3 id="step-1-install-package">Step 1: Install Package<a class="headerlink" href="#step-1-install-package" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>djangorestframework-simplejwt
pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</code></pre></div>

<h3 id="step-2-add-to-installed_apps">Step 2: Add to INSTALLED_APPS<a class="headerlink" href="#step-2-add-to-installed_apps" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rest_framework_simplejwt&#39;</span><span class="p">,</span>
    <span class="s1">&#39;api&#39;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

<h3 id="step-3-configure-jwt-settings">Step 3: Configure JWT Settings<a class="headerlink" href="#step-3-configure-jwt-settings" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>

<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework_simplejwt.authentication.JWTAuthentication&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.permissions.IsAuthenticated&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>

<span class="n">SIMPLE_JWT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ACCESS_TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">),</span>
    <span class="s1">&#39;REFRESH_TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="s1">&#39;ROTATE_REFRESH_TOKENS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;BLACKLIST_AFTER_ROTATION&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;UPDATE_LAST_LOGIN&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;ALGORITHM&#39;</span><span class="p">:</span> <span class="s1">&#39;HS256&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SIGNING_KEY&#39;</span><span class="p">:</span> <span class="n">SECRET_KEY</span><span class="p">,</span>
    <span class="s1">&#39;AUTH_HEADER_TYPES&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Bearer&#39;</span><span class="p">,),</span>
    <span class="s1">&#39;AUTH_HEADER_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER_ID_FIELD&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER_ID_CLAIM&#39;</span><span class="p">:</span> <span class="s1">&#39;user_id&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Explanation of JWT Settings</strong>:</p>
<ul>
<li><strong><code>ACCESS_TOKEN_LIFETIME</code></strong>: How long access token is valid (60 minutes)</li>
<li><strong>Why short?</strong>: If stolen, expires quickly</li>
<li>
<p><strong>Trade-off</strong>: Security vs convenience</p>
</li>
<li>
<p><strong><code>REFRESH_TOKEN_LIFETIME</code></strong>: How long refresh token is valid (1 day)</p>
</li>
<li><strong>Why longer?</strong>: Used to get new access tokens</li>
<li>
<p><strong>More secure</strong>: Stored more securely, used less often</p>
</li>
<li>
<p><strong><code>ROTATE_REFRESH_TOKENS</code></strong>: Issue new refresh token when used</p>
</li>
<li><strong>Why?</strong>: If old token stolen, it becomes invalid</li>
<li>
<p><strong>Security</strong>: Limits damage from token theft</p>
</li>
<li>
<p><strong><code>BLACKLIST_AFTER_ROTATION</code></strong>: Add old refresh token to blacklist</p>
</li>
<li><strong>Why?</strong>: Prevents reuse of old tokens</li>
<li>
<p><strong>Security</strong>: One-time use tokens</p>
</li>
<li>
<p><strong><code>UPDATE_LAST_LOGIN</code></strong>: Update user's last login time</p>
</li>
<li>
<p><strong>Why?</strong>: Track user activity, security monitoring</p>
</li>
<li>
<p><strong><code>ALGORITHM</code></strong>: How token is signed ('HS256' = HMAC SHA-256)</p>
</li>
<li><strong>Why HS256?</strong>: Fast, secure, widely supported</li>
<li>
<p><strong>Alternative</strong>: RS256 (asymmetric, more secure but slower)</p>
</li>
<li>
<p><strong><code>SIGNING_KEY</code></strong>: Secret key to sign tokens (use Django SECRET_KEY)</p>
</li>
<li><strong>Why secret?</strong>: Anyone with key can create valid tokens</li>
<li>
<p><strong>Security</strong>: Never expose this key!</p>
</li>
<li>
<p><strong><code>AUTH_HEADER_TYPES</code></strong>: Token type in header ('Bearer')</p>
</li>
<li><strong>Why Bearer?</strong>: Standard OAuth2 format</li>
<li>
<p><strong>Usage</strong>: <code>Authorization: Bearer &lt;token&gt;</code></p>
</li>
<li>
<p><strong><code>USER_ID_FIELD</code></strong>: Which User model field to use ('id')</p>
</li>
<li><strong><code>USER_ID_CLAIM</code></strong>: Where to store user ID in token ('user_id')</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">### Step 4: Add JWT URLs</span>

<span class="err">```</span><span class="n">python</span>
<span class="c1"># core/urls.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib</span><span class="w"> </span><span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.views</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">TokenObtainPairView</span><span class="p">,</span>
    <span class="n">TokenRefreshView</span><span class="p">,</span>
    <span class="n">TokenVerifyView</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;api.urls&#39;</span><span class="p">)),</span>
    <span class="c1"># JWT endpoints</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/token/&#39;</span><span class="p">,</span> <span class="n">TokenObtainPairView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;token_obtain_pair&#39;</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/token/refresh/&#39;</span><span class="p">,</span> <span class="n">TokenRefreshView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;token_refresh&#39;</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/token/verify/&#39;</span><span class="p">,</span> <span class="n">TokenVerifyView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;token_verify&#39;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div>

<h3 id="step-5-create-user-registration-view">Step 5: Create User Registration View<a class="headerlink" href="#step-5-create-user-registration-view" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserRegistrationSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">write_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">password_confirm</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">write_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">User</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;password_confirm&#39;</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password_confirm&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Passwords don&#39;t match&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;password_confirm&#39;</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">generics</span><span class="p">,</span> <span class="n">status</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.tokens</span><span class="w"> </span><span class="kn">import</span> <span class="n">RefreshToken</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRegistrationSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserRegistrationView</span><span class="p">(</span><span class="n">generics</span><span class="o">.</span><span class="n">CreateAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserRegistrationSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Allow anyone to register</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_serializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="c1"># Generate tokens</span>
        <span class="n">refresh</span> <span class="o">=</span> <span class="n">RefreshToken</span><span class="o">.</span><span class="n">for_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
            <span class="s1">&#39;refresh&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">refresh</span><span class="p">),</span>
            <span class="s1">&#39;access&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">refresh</span><span class="o">.</span><span class="n">access_token</span><span class="p">),</span>
        <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span><span class="p">)</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/urls.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ... other URLs ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;register/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">UserRegistrationView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;register&#39;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div>

<h3 id="step-6-test-jwt-authentication">Step 6: Test JWT Authentication<a class="headerlink" href="#step-6-test-jwt-authentication" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Register user</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/register/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;username&quot;: &quot;testuser&quot;,</span>
<span class="s1">    &quot;email&quot;: &quot;test@example.com&quot;,</span>
<span class="s1">    &quot;password&quot;: &quot;testpass123&quot;,</span>
<span class="s1">    &quot;password_confirm&quot;: &quot;testpass123&quot;</span>
<span class="s1">  }&#39;</span>

<span class="c1"># Get token</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;testuser&quot;, &quot;password&quot;: &quot;testpass123&quot;}&#39;</span>

<span class="c1"># Use token</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;your_access_token_here&quot;</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/
</code></pre></div>

<h2 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Permanent link">&para;</a></h2>
<h3 id="what-are-permissions">What are Permissions?<a class="headerlink" href="#what-are-permissions" title="Permanent link">&para;</a></h3>
<p><strong>Permissions</strong> determine what authenticated users can do.</p>
<p><strong>Why Permissions?</strong>
- <strong>Security</strong>: Not all users should do everything
- <strong>Data protection</strong>: Users should only see/edit their own data
- <strong>Role-based access</strong>: Admins can do more than regular users
- <strong>Compliance</strong>: Meet security requirements</p>
<p><strong>Real-world analogy</strong>:
- <strong>No permissions</strong> = Everyone has master key (bad!)
- <strong>With permissions</strong> = Different keys for different access levels (good!)</p>
<p><strong>Permission Levels</strong>:
1. <strong>Public</strong>: Anyone can access (AllowAny)
2. <strong>Authenticated</strong>: Must be logged in (IsAuthenticated)
3. <strong>Owner</strong>: Can only access own data (IsOwnerOrReadOnly)
4. <strong>Admin</strong>: Only staff can access (IsAdminUser)</p>
<h3 id="built-in-permission-classes">Built-in Permission Classes<a class="headerlink" href="#built-in-permission-classes" title="Permanent link">&para;</a></h3>
<h4 id="1-allowany">1. AllowAny<a class="headerlink" href="#1-allowany" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: Anyone can access, no authentication required.</p>
<p><strong>Why use it?</strong>
- Public data (blog posts, product listings)
- Registration/login endpoints
- Public APIs
- When you want maximum accessibility</p>
<p><strong>Security note</strong>: Use carefully! Only for truly public data.</p>
<p><strong>When to use</strong>:
- ✅ Public blog posts
- ✅ Product catalogs
- ✅ Public user profiles
- ❌ User data
- ❌ Admin functions</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">AllowAny</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">AllowAny</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<h4 id="2-isauthenticated">2. IsAuthenticated<a class="headerlink" href="#2-isauthenticated" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: User must be logged in (authenticated) to access.</p>
<p><strong>Why use it?</strong>
- <strong>Protect data</strong>: Only logged-in users can access
- <strong>User-specific content</strong>: Show personalized data
- <strong>Account required</strong>: Force users to create accounts
- <strong>Security</strong>: Basic protection for most endpoints</p>
<p><strong>When to use</strong>:
- ✅ User's own tasks/books
- ✅ User profiles
- ✅ Private data
- ✅ Any endpoint requiring user identity</p>
<p><strong>What happens if not authenticated?</strong>
- Returns <code>401 Unauthorized</code>
- Client must login first
- Token/session required</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticated</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<p><strong>Why this configuration?</strong>
- Applies to all actions (list, create, retrieve, update, delete)
- Can override per-action if needed
- Most common permission for user data</p>
<h4 id="3-isadminuser">3. IsAdminUser<a class="headerlink" href="#3-isadminuser" title="Permanent link">&para;</a></h4>
<p>User must be staff/admin.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAdminUser</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAdminUser</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<h4 id="4-isauthenticatedorreadonly">4. IsAuthenticatedOrReadOnly<a class="headerlink" href="#4-isauthenticatedorreadonly" title="Permanent link">&para;</a></h4>
<p><strong>What it does</strong>: 
- <strong>Authenticated users</strong>: Can do everything (read, create, update, delete)
- <strong>Unauthenticated users</strong>: Can only read (GET requests)</p>
<p><strong>Why use it?</strong>
- <strong>Public viewing</strong>: Anyone can see data
- <strong>Protected editing</strong>: Only logged-in users can modify
- <strong>Common pattern</strong>: Blog posts, comments, products
- <strong>User engagement</strong>: Encourage registration to participate</p>
<p><strong>Real-world example</strong>:
- Blog: Anyone can read posts, only logged-in users can comment
- Products: Anyone can browse, only logged-in users can add to cart
- Comments: Anyone can read, only logged-in users can post</p>
<p><strong>When to use</strong>:
- ✅ Public content with user contributions
- ✅ Read-mostly APIs
- ✅ When you want public access but protected writes
- ❌ Private/sensitive data</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticatedOrReadOnly</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticatedOrReadOnly</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<p><strong>What this means</strong>:
- <code>GET /api/books/</code> → Anyone can access ✅
- <code>POST /api/books/</code> → Must be authenticated ✅
- <code>PUT /api/books/1/</code> → Must be authenticated ✅
- <code>DELETE /api/books/1/</code> → Must be authenticated ✅</p>
<h3 id="custom-permissions">Custom Permissions<a class="headerlink" href="#custom-permissions" title="Permanent link">&para;</a></h3>
<h4 id="isownerorreadonly">IsOwnerOrReadOnly<a class="headerlink" href="#isownerorreadonly" title="Permanent link">&para;</a></h4>
<p>Only the owner can edit/delete, others can read.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/permissions.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">permissions</span>

<span class="k">class</span><span class="w"> </span><span class="nc">IsOwnerOrReadOnly</span><span class="p">(</span><span class="n">permissions</span><span class="o">.</span><span class="n">BasePermission</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom permission to only allow owners to edit/delete objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">has_object_permission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="c1"># Read permissions for any request</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="n">permissions</span><span class="o">.</span><span class="n">SAFE_METHODS</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># Write permissions only to the owner</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">owner</span> <span class="o">==</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
</code></pre></div>

<p><strong>Use in views:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsOwnerOrReadOnly</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">,</span> <span class="n">IsOwnerOrReadOnly</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h3 id="permission-at-view-level">Permission at View Level<a class="headerlink" href="#permission-at-view-level" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Different permissions for different actions</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">&#39;create&#39;</span><span class="p">:</span>
            <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="s1">&#39;partial_update&#39;</span><span class="p">,</span> <span class="s1">&#39;destroy&#39;</span><span class="p">]:</span>
            <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">,</span> <span class="n">IsOwnerOrReadOnly</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">AllowAny</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">permission</span><span class="p">()</span> <span class="k">for</span> <span class="n">permission</span> <span class="ow">in</span> <span class="n">permission_classes</span><span class="p">]</span>
</code></pre></div>

<h2 id="filtering">Filtering<a class="headerlink" href="#filtering" title="Permanent link">&para;</a></h2>
<h3 id="what-is-filtering">What is Filtering?<a class="headerlink" href="#what-is-filtering" title="Permanent link">&para;</a></h3>
<p><strong>Filtering</strong> allows clients to request specific subsets of data based on criteria.</p>
<p><strong>The Problem</strong>: Without filtering, clients get ALL data, even if they only need a subset.</p>
<p><strong>Example</strong>:
- Without filtering: <code>GET /api/books/</code> → Returns 10,000 books ❌
- With filtering: <code>GET /api/books/?author=John</code> → Returns only John's books ✅</p>
<p><strong>Why Filtering?</strong>
- <strong>Performance</strong>: Return only needed data (faster queries)
- <strong>User experience</strong>: Users find what they're looking for
- <strong>Bandwidth</strong>: Less data transferred
- <strong>Database efficiency</strong>: Queries only relevant records</p>
<p><strong>Real-world analogy</strong>:
- <strong>No filtering</strong> = Library with no organization (find book by searching all shelves)
- <strong>With filtering</strong> = Library with sections (go directly to "Fiction" section)</p>
<p><strong>Common Filter Types</strong>:
- <strong>Exact match</strong>: <code>?author=John</code> (author exactly equals "John")
- <strong>Contains</strong>: <code>?title__icontains=django</code> (title contains "django")
- <strong>Range</strong>: <code>?price__gte=10&amp;price__lte=50</code> (price between 10 and 50)
- <strong>Date range</strong>: <code>?created_after=2024-01-01</code> (created after date)</p>
<h3 id="install-django-filter">Install django-filter<a class="headerlink" href="#install-django-filter" title="Permanent link">&para;</a></h3>
<p><strong>Why django-filter?</strong>
- Makes filtering easy and powerful
- Supports complex filters
- Works seamlessly with DRF
- Handles edge cases</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>django-filter
</code></pre></div>

<h3 id="configure-in-settingspy">Configure in settings.py<a class="headerlink" href="#configure-in-settingspy" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;django_filters&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_FILTER_BACKENDS&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;django_filters.rest_framework.DjangoFilterBackend&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.filters.SearchFilter&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.filters.OrderingFilter&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="basic-filtering">Basic Filtering<a class="headerlink" href="#basic-filtering" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client adds query parameters to URL: <code>?author=John</code>
2. Django Filter intercepts request
3. Applies filters to queryset
4. Returns filtered results</p>
<p><strong>Why <code>filter_backends</code>?</strong>
- Tells DRF which filtering system to use
- Can use multiple backends (filtering + searching + ordering)
- Each backend handles different aspects</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">]</span>  <span class="c1"># Enable filtering</span>
    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">]</span>  <span class="c1"># Which fields can be filtered</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>filter_backends</code></strong>: List of filtering systems to use
- <strong><code>filterset_fields</code></strong>: Simple list of fields that can be filtered
- <strong>Exact match</strong>: <code>?author=John</code> finds books where author exactly equals "John"</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Filter by author</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?author<span class="o">=</span>John%20Doe
</code></pre></div>

<p><strong>What happens</strong>:
- URL parameter <code>author=John%20Doe</code> (URL-encoded space)
- Django Filter finds books where <code>author</code> field equals "John Doe"
- Returns only matching books</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Filter by multiple fields</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?author<span class="o">=</span>John%20Doe<span class="p">&amp;</span><span class="nv">published_date</span><span class="o">=</span><span class="m">2023</span>-01-01
</code></pre></div>

<p><strong>What happens</strong>:
- Both filters applied: <code>author=John Doe</code> AND <code>published_date=2023-01-01</code>
- Returns books matching BOTH criteria
- Filters are combined with AND logic</p>
<h3 id="advanced-filtering-with-filterset">Advanced Filtering with FilterSet<a class="headerlink" href="#advanced-filtering-with-filterset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span><span class="p">)</span>
    <span class="n">published_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>
    <span class="n">published_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_after&#39;</span><span class="p">,</span> <span class="s1">&#39;published_before&#39;</span><span class="p">]</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookFilter</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">BookFilter</span>
</code></pre></div>

<h2 id="searching">Searching<a class="headerlink" href="#searching" title="Permanent link">&para;</a></h2>
<h3 id="what-is-searching">What is Searching?<a class="headerlink" href="#what-is-searching" title="Permanent link">&para;</a></h3>
<p><strong>Searching</strong> allows users to find data by searching across multiple fields with a single query.</p>
<p><strong>Difference from Filtering</strong>:
- <strong>Filtering</strong>: Exact matches on specific fields (<code>?author=John</code>)
- <strong>Searching</strong>: Partial matches across multiple fields (<code>?search=john</code> finds in title, author, description)</p>
<p><strong>Why Searching?</strong>
- <strong>User-friendly</strong>: Users don't need to know exact field names
- <strong>Flexible</strong>: Search across multiple fields at once
- <strong>Common pattern</strong>: Search boxes in web apps
- <strong>Better UX</strong>: "Search for anything" vs "Filter by specific field"</p>
<p><strong>Real-world analogy</strong>:
- <strong>Filtering</strong> = Library catalog with specific fields (author, genre, year)
- <strong>Searching</strong> = Google search (type anything, finds matches anywhere)</p>
<h3 id="searchfilter">SearchFilter<a class="headerlink" href="#searchfilter" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. User types search term: <code>?search=django</code>
2. DRF searches across specified fields
3. Returns records matching search term in ANY field
4. Uses case-insensitive partial matching by default</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">]</span>  <span class="c1"># Enable searching</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>  <span class="c1"># Fields to search</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>SearchFilter</code></strong>: DRF's built-in search backend (no extra package needed)
- <strong><code>search_fields</code></strong>: List of fields to search in
- <strong>Default behavior</strong>: Case-insensitive, partial matching
- <strong>OR logic</strong>: Matches if search term found in ANY field</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Search in title, author, description</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?search<span class="o">=</span>django
</code></pre></div>

<p><strong>What happens</strong>:
- Searches for "django" in <code>title</code>, <code>author</code>, and <code>description</code> fields
- Returns books where ANY field contains "django"
- Case-insensitive: "Django", "DJANGO", "django" all match
- Partial match: "Django for Beginners" matches "django"</p>
<h3 id="search-lookup-expressions">Search Lookup Expressions<a class="headerlink" href="#search-lookup-expressions" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;^title&#39;</span><span class="p">,</span>      <span class="c1"># Starts with</span>
        <span class="s1">&#39;=isbn&#39;</span><span class="p">,</span>       <span class="c1"># Exact match</span>
        <span class="s1">&#39;@description&#39;</span><span class="p">,</span> <span class="c1"># Full text search (PostgreSQL only)</span>
        <span class="s1">&#39;$title&#39;</span><span class="p">,</span>      <span class="c1"># Regex search</span>
    <span class="p">]</span>
</code></pre></div>

<h2 id="ordering">Ordering<a class="headerlink" href="#ordering" title="Permanent link">&para;</a></h2>
<h3 id="what-is-ordering">What is Ordering?<a class="headerlink" href="#what-is-ordering" title="Permanent link">&para;</a></h3>
<p><strong>Ordering</strong> controls the sequence in which results are returned.</p>
<p><strong>The Problem</strong>: Without ordering, results come in unpredictable order (usually database insertion order).</p>
<p><strong>Why Ordering?</strong>
- <strong>User experience</strong>: Show most relevant/newest first
- <strong>Consistency</strong>: Same query always returns same order
- <strong>Flexibility</strong>: Let users choose sort order
- <strong>Default behavior</strong>: Set sensible default (newest first, alphabetical, etc.)</p>
<p><strong>Real-world analogy</strong>:
- <strong>No ordering</strong> = Bookshelf with random order
- <strong>With ordering</strong> = Bookshelf organized by date (newest first) or alphabetically</p>
<h3 id="orderingfilter">OrderingFilter<a class="headerlink" href="#orderingfilter" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client specifies order: <code>?ordering=-created_at</code>
2. DRF sorts queryset by specified field
3. <code>-</code> prefix means descending (newest first)
4. No prefix means ascending (oldest first)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>  <span class="c1"># Enable ordering</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>  <span class="c1"># Allowed fields</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>  <span class="c1"># Default ordering (newest first)</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>OrderingFilter</code></strong>: DRF's built-in ordering backend
- <strong><code>ordering_fields</code></strong>: Which fields users can sort by (security: prevents sorting by sensitive fields)
- <strong><code>ordering</code></strong>: Default order if user doesn't specify
- <strong><code>-</code> prefix</strong>: Descending order (newest/highest first)
- <strong>No prefix</strong>: Ascending order (oldest/lowest first)</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Order by title (ascending: A-Z)</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?ordering<span class="o">=</span>title
</code></pre></div>

<p><strong>What happens</strong>: Books sorted alphabetically by title (A to Z)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Order by created_at (descending: newest first)</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?ordering<span class="o">=</span>-created_at
</code></pre></div>

<p><strong>What happens</strong>: Books sorted by creation date, newest first (most recent at top)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Multiple fields: First by author, then by published_date (descending)</span>
curl<span class="w"> </span>http://localhost:8000/api/books/?ordering<span class="o">=</span>author,-published_date
</code></pre></div>

<p><strong>What happens</strong>: 
1. First sorts by author (A-Z)
2. Within same author, sorts by published_date (newest first)
3. Useful for grouped sorting</p>
<h2 id="pagination">Pagination<a class="headerlink" href="#pagination" title="Permanent link">&para;</a></h2>
<h3 id="what-is-pagination">What is Pagination?<a class="headerlink" href="#what-is-pagination" title="Permanent link">&para;</a></h3>
<p><strong>Pagination</strong> splits large result sets into smaller "pages" of data.</p>
<p><strong>The Problem</strong>: Without pagination, returning 10,000 records causes:
- <strong>Slow response</strong>: Large JSON payload
- <strong>High memory</strong>: Server/client must handle all data
- <strong>Poor UX</strong>: User overwhelmed with data
- <strong>Database load</strong>: Fetching all records at once</p>
<p><strong>Why Pagination?</strong>
- <strong>Performance</strong>: Faster responses (only fetch what's needed)
- <strong>User experience</strong>: Manageable chunks of data
- <strong>Scalability</strong>: Works with millions of records
- <strong>Bandwidth</strong>: Less data transferred
- <strong>Mobile-friendly</strong>: Smaller payloads for mobile networks</p>
<p><strong>Real-world analogy</strong>:
- <strong>No pagination</strong> = Dumping entire library catalog on one page
- <strong>With pagination</strong> = Showing 10 books per page with "Next" button</p>
<p><strong>Common Pagination Types</strong>:
1. <strong>Page Number</strong>: <code>?page=2</code> (most common, user-friendly)
2. <strong>Limit/Offset</strong>: <code>?limit=20&amp;offset=40</code> (flexible, good for APIs)
3. <strong>Cursor</strong>: <code>?cursor=abc123</code> (best for large datasets, stable)</p>
<h3 id="pagenumberpagination">PageNumberPagination<a class="headerlink" href="#pagenumberpagination" title="Permanent link">&para;</a></h3>
<p><strong>How it works</strong>:
1. Client requests page: <code>?page=2</code>
2. Server calculates which records to return (records 11-20 for page 2)
3. Returns page data + metadata (total count, next/previous links)
4. Client can navigate to next/previous pages</p>
<p><strong>Why Page Number?</strong>
- <strong>User-friendly</strong>: Easy to understand ("Go to page 2")
- <strong>Simple</strong>: Just specify page number
- <strong>Good for</strong>: Web UIs, predictable navigation
- <strong>Limitation</strong>: Can be slow with very large datasets (offset calculation)</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class="p">:</span> <span class="s1">&#39;rest_framework.pagination.PageNumberPagination&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PAGE_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># Records per page</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Explanation</strong>:
- <strong><code>DEFAULT_PAGINATION_CLASS</code></strong>: Applies to all list endpoints
- <strong><code>PAGE_SIZE</code></strong>: How many records per page
- <strong>Can override</strong>: Per-view if needed</p>
<p><strong>Response format:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">  </span><span class="c1">// Total number of records</span>
<span class="w">    </span><span class="nt">&quot;next&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?page=2&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// URL for next page</span>
<span class="w">    </span><span class="nt">&quot;previous&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">  </span><span class="c1">// URL for previous page (null if on first page)</span>
<span class="w">    </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">  </span><span class="c1">// Actual data (10 records)</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this format?</strong>
- <strong><code>count</code></strong>: Total records (for progress indicators: "Showing 1-10 of 100")
- <strong><code>next</code></strong>: Direct link to next page (convenient for clients)
- <strong><code>previous</code></strong>: Direct link to previous page
- <strong><code>results</code></strong>: Actual data array</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>http://localhost:8000/api/books/?page<span class="o">=</span><span class="m">2</span>
</code></pre></div>

<p><strong>What happens</strong>: Returns records 11-20 (page 2, assuming 10 per page)</p>
<h3 id="limitoffsetpagination">LimitOffsetPagination<a class="headerlink" href="#limitoffsetpagination" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/pagination.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">LimitOffsetPagination</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookLimitOffsetPagination</span><span class="p">(</span><span class="n">LimitOffsetPagination</span><span class="p">):</span>
    <span class="n">default_limit</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">limit_query_param</span> <span class="o">=</span> <span class="s1">&#39;limit&#39;</span>
    <span class="n">offset_query_param</span> <span class="o">=</span> <span class="s1">&#39;offset&#39;</span>
    <span class="n">max_limit</span> <span class="o">=</span> <span class="mi">100</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookLimitOffsetPagination</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">BookLimitOffsetPagination</span>
    <span class="c1"># ...</span>
</code></pre></div>

<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>http://localhost:8000/api/books/?limit<span class="o">=</span><span class="m">20</span><span class="p">&amp;</span><span class="nv">offset</span><span class="o">=</span><span class="m">40</span>
</code></pre></div>

<h3 id="cursorpagination">CursorPagination<a class="headerlink" href="#cursorpagination" title="Permanent link">&para;</a></h3>
<p>Best for large datasets. Provides stable, consistent pagination.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/pagination.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">CursorPagination</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookCursorPagination</span><span class="p">(</span><span class="n">CursorPagination</span><span class="p">):</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="s1">&#39;-created_at&#39;</span>
    <span class="n">cursor_query_param</span> <span class="o">=</span> <span class="s1">&#39;cursor&#39;</span>
</code></pre></div>

<h2 id="step-by-step-secure-book-api">Step-by-Step: Secure Book API<a class="headerlink" href="#step-by-step-secure-book-api" title="Permanent link">&para;</a></h2>
<p>Let's upgrade the Book API with authentication and filtering.</p>
<h3 id="step-1-update-book-model">Step 1: Update Book Model<a class="headerlink" href="#step-1-update-book-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">published_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">isbn</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;books&#39;</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>
</code></pre></div>

<p><strong>Create migration:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>manage.py<span class="w"> </span>makemigrations
python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>

<h3 id="step-2-update-book-serializer">Step 2: Update Book Serializer<a class="headerlink" href="#step-2-update-book-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">owner_username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;owner.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="s1">&#39;isbn&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;owner_username&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-filter">Step 3: Create Filter<a class="headerlink" href="#step-3-create-filter" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;icontains&#39;</span><span class="p">)</span>
    <span class="n">published_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>
    <span class="n">published_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_after&#39;</span><span class="p">,</span> <span class="s1">&#39;published_before&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-4-update-book-viewset">Step 4: Update Book ViewSet<a class="headerlink" href="#step-4-update-book-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticatedOrReadOnly</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Book</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookSerializer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookFilter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsOwnerOrReadOnly</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticatedOrReadOnly</span><span class="p">,</span> <span class="n">IsOwnerOrReadOnly</span><span class="p">]</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">BookFilter</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-5-test-secure-book-api">Step 5: Test Secure Book API<a class="headerlink" href="#step-5-test-secure-book-api" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Get token</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;testuser&quot;, &quot;password&quot;: &quot;testpass123&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import sys, json; print(json.load(sys.stdin)[&#39;access&#39;])&quot;</span><span class="k">)</span>

<span class="c1"># Create book (authenticated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/books/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;title&quot;: &quot;Django for Beginners&quot;,</span>
<span class="s1">    &quot;author&quot;: &quot;John Doe&quot;,</span>
<span class="s1">    &quot;published_date&quot;: &quot;2023-01-15&quot;,</span>
<span class="s1">    &quot;description&quot;: &quot;Learn Django step by step&quot;</span>
<span class="s1">  }&#39;</span>

<span class="c1"># List books (anyone can read)</span>
curl<span class="w"> </span>http://localhost:8000/api/books/

<span class="c1"># Filter by author</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?author=John&quot;</span>

<span class="c1"># Search</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?search=django&quot;</span>

<span class="c1"># Order by title</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:8000/api/books/?ordering=title&quot;</span>
</code></pre></div>

<h2 id="step-by-step-secure-task-api">Step-by-Step: Secure Task API<a class="headerlink" href="#step-by-step-secure-task-api" title="Permanent link">&para;</a></h2>
<h3 id="step-1-update-task-model">Step 1: Update Task Model<a class="headerlink" href="#step-1-update-task-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;tasks&#39;</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>
</code></pre></div>

<p><strong>Create migration:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>manage.py<span class="w"> </span>makemigrations
python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>

<h3 id="step-2-update-task-serializer">Step 2: Update Task Serializer<a class="headerlink" href="#step-2-update-task-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaskSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">owner_username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;owner.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">,</span> <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;owner_username&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-task-filter">Step 3: Create Task Filter<a class="headerlink" href="#step-3-create-task-filter" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/filters.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">django_filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="o">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">completed</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">BooleanFilter</span><span class="p">()</span>
    <span class="n">created_after</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gte&#39;</span><span class="p">)</span>
    <span class="n">created_before</span> <span class="o">=</span> <span class="n">django_filters</span><span class="o">.</span><span class="n">DateFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lte&#39;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Task</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_after&#39;</span><span class="p">,</span> <span class="s1">&#39;created_before&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-4-update-task-viewset">Step 4: Update Task ViewSet<a class="headerlink" href="#step-4-update-task-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">filters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django_filters.rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskSerializer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskFilter</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">TaskSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">SearchFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">]</span>
    <span class="n">filterset_class</span> <span class="o">=</span> <span class="n">TaskFilter</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">]</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_at&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Users can only see their own tasks</span>
        <span class="k">return</span> <span class="n">Task</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-5-test-secure-task-api">Step 5: Test Secure Task API<a class="headerlink" href="#step-5-test-secure-task-api" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create task (authenticated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/tasks/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;title&quot;: &quot;Learn DRF Level 2&quot;,</span>
<span class="s1">    &quot;desc&quot;: &quot;Complete authentication and permissions&quot;,</span>
<span class="s1">    &quot;completed&quot;: false</span>
<span class="s1">  }&#39;</span>

<span class="c1"># List my tasks</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/

<span class="c1"># Filter by completed</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?completed=false&quot;</span>

<span class="c1"># Search tasks</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://localhost:8000/api/tasks/?search=DRF&quot;</span>
</code></pre></div>

<h2 id="userprofile-api">UserProfile API<a class="headerlink" href="#userprofile-api" title="Permanent link">&para;</a></h2>
<h3 id="step-1-create-userprofile-model">Step 1: Create UserProfile Model<a class="headerlink" href="#step-1-create-userprofile-model" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/models.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;profile&#39;</span><span class="p">)</span>
    <span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">phone_number</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;avatars/&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;s Profile&quot;</span>
</code></pre></div>

<h3 id="step-2-create-userprofile-serializer">Step 2: Create UserProfile Serializer<a class="headerlink" href="#step-2-create-userprofile-serializer" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UserProfileSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;user.username&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;user.email&#39;</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">UserProfile</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;bio&#39;</span><span class="p">,</span> <span class="s1">&#39;phone_number&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;avatar&#39;</span><span class="p">,</span> <span class="s1">&#39;website&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">]</span>
</code></pre></div>

<h3 id="step-3-create-userprofile-viewset">Step 3: Create UserProfile ViewSet<a class="headerlink" href="#step-3-create-userprofile-viewset" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.permissions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IsAuthenticated</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserProfileSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfileViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserProfileSerializer</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">UserProfile</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<h2 id="throttling">Throttling<a class="headerlink" href="#throttling" title="Permanent link">&para;</a></h2>
<h3 id="configure-throttling">Configure Throttling<a class="headerlink" href="#configure-throttling" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># core/settings.py</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;rest_framework.throttling.AnonRateThrottle&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.throttling.UserRateThrottle&#39;</span>
    <span class="p">],</span>
    <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;anon&#39;</span><span class="p">:</span> <span class="s1">&#39;100/hour&#39;</span><span class="p">,</span>
        <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;1000/hour&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="custom-throttling">Custom Throttling<a class="headerlink" href="#custom-throttling" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/throttles.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework.throttling</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserRateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookCreateThrottle</span><span class="p">(</span><span class="n">UserRateThrottle</span><span class="p">):</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="s1">&#39;5/day&#39;</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.throttles</span><span class="w"> </span><span class="kn">import</span> <span class="n">BookCreateThrottle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BookViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">BookCreateThrottle</span><span class="p">]</span>
    <span class="c1"># ...</span>
</code></pre></div>

<h2 id="testing-authenticated-apis">Testing Authenticated APIs<a class="headerlink" href="#testing-authenticated-apis" title="Permanent link">&para;</a></h2>
<p>See <a href="CURL_GUIDE.html">CURL_GUIDE.md</a> for detailed examples. Quick reference:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Get token</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;user&quot;, &quot;password&quot;: &quot;pass&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.access&#39;</span><span class="k">)</span>

<span class="c1"># Use token</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8000/api/tasks/

<span class="c1"># Refresh token</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/token/refresh/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;refresh&quot;: &quot;your_refresh_token&quot;}&#39;</span>
</code></pre></div>

<h2 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-complete-secure-book-api">Exercise 1: Complete Secure Book API<a class="headerlink" href="#exercise-1-complete-secure-book-api" title="Permanent link">&para;</a></h3>
<ol>
<li>Add owner field to Book model</li>
<li>Implement IsOwnerOrReadOnly permission</li>
<li>Add filtering by author and date range</li>
<li>Add search functionality</li>
<li>Add pagination</li>
<li>Test all endpoints with cURL</li>
</ol>
<h3 id="exercise-2-userprofile-api">Exercise 2: UserProfile API<a class="headerlink" href="#exercise-2-userprofile-api" title="Permanent link">&para;</a></h3>
<ol>
<li>Create UserProfile model</li>
<li>Create UserProfileSerializer and ViewSet</li>
<li>Allow users to view/edit only their own profile</li>
<li>Test with cURL</li>
</ol>
<h3 id="exercise-3-task-filtering">Exercise 3: Task Filtering<a class="headerlink" href="#exercise-3-task-filtering" title="Permanent link">&para;</a></h3>
<ol>
<li>Add priority field to Task model</li>
<li>Create TaskFilter with priority filtering</li>
<li>Add ordering by priority</li>
<li>Test filtering and ordering</li>
</ol>
<h2 id="add-ons">Add-ons<a class="headerlink" href="#add-ons" title="Permanent link">&para;</a></h2>
<h3 id="add-on-1-custom-jwt-claims">Add-on 1: Custom JWT Claims<a class="headerlink" href="#add-on-1-custom-jwt-claims" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># api/serializers.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TokenObtainPairSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomTokenObtainPairSerializer</span><span class="p">(</span><span class="n">TokenObtainPairSerializer</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_token</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="n">token</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span>
        <span class="n">token</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span>
        <span class="k">return</span> <span class="n">token</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># api/views.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rest_framework_simplejwt.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">TokenObtainPairView</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.serializers</span><span class="w"> </span><span class="kn">import</span> <span class="n">CustomTokenObtainPairSerializer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomTokenObtainPairView</span><span class="p">(</span><span class="n">TokenObtainPairView</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">CustomTokenObtainPairSerializer</span>
</code></pre></div>

<h3 id="add-on-2-rate-limiting">Add-on 2: Rate Limiting<a class="headerlink" href="#add-on-2-rate-limiting" title="Permanent link">&para;</a></h3>
<p>Implement different rate limits for different actions.</p>
<h3 id="add-on-3-permission-mixins">Add-on 3: Permission Mixins<a class="headerlink" href="#add-on-3-permission-mixins" title="Permanent link">&para;</a></h3>
<p>Create reusable permission mixins for common patterns.</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Congratulations! You've completed Level 2. You now know:</p>
<ul>
<li>✅ Django authentication system</li>
<li>✅ JWT authentication setup</li>
<li>✅ Permissions (built-in and custom)</li>
<li>✅ Filtering, searching, and ordering</li>
<li>✅ Pagination strategies</li>
<li>✅ Building secure APIs</li>
</ul>
<p><strong>Ready for Level 3?</strong> Continue to <a href="LEVEL_3_ADVANCED.html">Level 3: Advanced</a> to learn about relationships, nested serializers, and query optimization!</p>
<hr />
<p><strong>Resources:</strong>
- <a href="https://www.django-rest-framework.org/api-guide/authentication/">DRF Authentication</a>
- <a href="https://www.django-rest-framework.org/api-guide/permissions/">DRF Permissions</a>
- <a href="https://github.com/jazzband/djangorestframework-simplejwt">djangorestframework-simplejwt</a>
- <a href="https://django-filter.readthedocs.io/">django-filter</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.sections", "navigation.expand", "navigation.instant", "toc.integrate", "content.code.copy"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>